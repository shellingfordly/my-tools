import{g as L,o as je,r as ve,b as Ve,p as Ne,c as q,j as Re,I as Me,B as Te,i as pe,_ as R,s as Fe,a as We}from"./index.cdfcc5d8.js";import{d as se,I as Y,e as Ae}from"./use-popup-manager.b89a1cc3.js";import{o as Ge,p as De,F as He,E as Ze,I as ie}from"./index.c6a20670.js";import{r as y,d as $,t as me,c as f,y as qe,B as d,m as N,E as Ke,R as Ue,F as Je,o as _,a as ee,n as ne,e as he,f as M,g as j,h as V,l as Qe,w as I,b as S,S as ue,i as Xe}from"./index.4b01108f.js";function Ye(e){const t=y();function n(){if(!e.value)return;const{selectionStart:s,selectionEnd:i,value:l}=e.value;if(s==null||i==null)return;const p=l.slice(0,Math.max(0,s)),o=l.slice(Math.max(0,i));t.value={selectionStart:s,selectionEnd:i,value:l,beforeTxt:p,afterTxt:o}}function u(){if(!e.value||!t.value)return;const{value:s}=e.value,{beforeTxt:i,afterTxt:l,selectionStart:p}=t.value;if(!i||!l||!p)return;let o=s.length;if(s.endsWith(l))o=s.length-l.length;else if(s.startsWith(i))o=i.length;else{const v=i[p-1],k=s.indexOf(v,p-1);k!==-1&&(o=k+1)}e.value.setSelectionRange(o,o)}return[n,u]}var en=Object.defineProperty,ce=Object.getOwnPropertySymbols,nn=Object.prototype.hasOwnProperty,tn=Object.prototype.propertyIsEnumerable,de=(e,t,n)=>t in e?en(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fe=(e,t)=>{for(var n in t||(t={}))nn.call(t,n)&&de(e,n,t[n]);if(ce)for(var n of ce(t))tn.call(t,n)&&de(e,n,t[n]);return e},B=$({name:"Input",inheritAttrs:!1,props:{modelValue:String,defaultValue:{type:String,default:""},size:{type:String},allowClear:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},placeholder:String,maxLength:{type:[Number,Object],default:0},showWordLimit:{type:Boolean,default:!1},wordLength:{type:Function},wordSlice:{type:Function},inputAttrs:{type:Object},type:{type:String,default:"text"}},emits:{"update:modelValue":e=>!0,input:(e,t)=>!0,change:(e,t)=>!0,pressEnter:e=>!0,clear:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:t,slots:n,attrs:u}){const{size:s,disabled:i,error:l,modelValue:p}=me(e),o=L("input"),v=y(),{mergedSize:k,mergedDisabled:m,mergedError:C,feedback:z,eventHandlers:x}=je({size:s,disabled:i,error:l}),{mergedSize:te}=ve(k),[be,ge]=Ye(v),T=y(e.defaultValue),b=f(()=>{var a;return(a=e.modelValue)!=null?a:T.value});qe(p,a=>{(Ve(a)||Ne(a))&&(T.value="")});let F=b.value;const W=y(!1),ye=f(()=>e.allowClear&&!m.value&&Boolean(b.value)),P=y(!1),ae=y(""),w=a=>{var r;return Re(e.wordLength)?e.wordLength(a):(r=a.length)!=null?r:0},E=f(()=>w(b.value)),le=f(()=>C.value||Boolean(q(e.maxLength)&&e.maxLength.errorOnly&&E.value>h.value)),A=f(()=>q(e.maxLength)&&Boolean(e.maxLength.errorOnly)),h=f(()=>q(e.maxLength)?e.maxLength.length:e.maxLength),_e=f(()=>{const a=w("a");return Math.floor(h.value/a)}),G=a=>{var r,c;h.value&&!A.value&&w(a)>h.value&&(a=(c=(r=e.wordSlice)==null?void 0:r.call(e,a,h.value))!=null?c:a.slice(0,_e.value)),T.value=a,t("update:modelValue",a)},$e=a=>{v.value&&a.target!==v.value&&(a.preventDefault(),v.value.focus())},D=(a,r)=>{var c,g;a!==F&&(F=a,t("change",a,r),(g=(c=x.value)==null?void 0:c.onChange)==null||g.call(c,r))},ke=a=>{var r,c;W.value=!0,F=b.value,t("focus",a),(c=(r=x.value)==null?void 0:r.onFocus)==null||c.call(r,a)},Ce=a=>{var r,c;W.value=!1,D(b.value,a),t("blur",a),(c=(r=x.value)==null?void 0:r.onBlur)==null||c.call(r,a)},H=a=>{var r,c,g;const{value:Z,selectionStart:Ee,selectionEnd:Oe}=a.target;if(a.type==="compositionend"){if(P.value=!1,ae.value="",h.value&&!A.value&&E.value>=h.value&&w(Z)>h.value&&Ee===Oe){O();return}G(Z),t("input",Z,a),(c=(r=x.value)==null?void 0:r.onInput)==null||c.call(r,a),O()}else P.value=!0,ae.value=b.value+((g=a.data)!=null?g:"")},O=()=>{be(),Ue(()=>{v.value&&b.value!==v.value.value&&(v.value.value=b.value,ge())})},xe=a=>{var r,c;const{value:g}=a.target;if(!P.value){if(h.value&&!A.value&&E.value>=h.value&&w(g)>h.value&&a.inputType==="insertText"){O();return}G(g),t("input",g,a),(c=(r=x.value)==null?void 0:r.onInput)==null||c.call(r,a),O()}},we=a=>{G(""),D("",a),t("clear",a)},Ie=a=>{const r=a.key||a.code;!P.value&&r===Ze.key&&(D(b.value,a),t("pressEnter",a))},Se=f(()=>[`${o}-outer`,`${o}-outer-size-${te.value}`,{[`${o}-outer-has-suffix`]:Boolean(n.suffix),[`${o}-outer-disabled`]:m.value}]),Be=f(()=>[`${o}-wrapper`,{[`${o}-error`]:le.value,[`${o}-disabled`]:m.value,[`${o}-focus`]:W.value}]),Le=f(()=>[o,`${o}-size-${te.value}`]),oe=f(()=>Ge(u,se)),ze=f(()=>De(u,se)),Pe=f(()=>{const a=fe(fe({},ze.value),e.inputAttrs);return le.value&&(a["aria-invalid"]=!0),a}),re=a=>{var r;return d("span",N({class:Be.value,onMousedown:$e},a?void 0:oe.value),[n.prefix&&d("span",{class:`${o}-prefix`},[n.prefix()]),d("input",N(Pe.value,{ref:v,class:Le.value,value:b.value,type:e.type,placeholder:e.placeholder,readonly:e.readonly,disabled:m.value,onInput:xe,onKeydown:Ie,onFocus:ke,onBlur:Ce,onCompositionstart:H,onCompositionupdate:H,onCompositionend:H}),null),ye.value&&d(Y,{prefix:o,class:`${o}-clear-btn`,onClick:we},{default:()=>[d(Ae,null,null)]}),(n.suffix||Boolean(e.maxLength)&&e.showWordLimit||Boolean(z.value))&&d("span",{class:[`${o}-suffix`,{[`${o}-suffix-has-feedback`]:z.value}]},[Boolean(e.maxLength)&&e.showWordLimit&&d("span",{class:`${o}-word-limit`},[E.value,Ke("/"),h.value]),(r=n.suffix)==null?void 0:r.call(n),Boolean(z.value)&&d(He,{type:z.value},null)])])};return{inputRef:v,render:()=>n.prepend||n.append?d("span",N({class:Se.value},oe.value),[n.prepend&&d("span",{class:`${o}-prepend`},[n.prepend()]),re(!0),n.append&&d("span",{class:`${o}-append`},[n.append()])]):re()}},methods:{focus(){var e;(e=this.inputRef)==null||e.focus()},blur(){var e;(e=this.inputRef)==null||e.blur()}},render(){return this.render()}}),K=$({name:"InputSearch",props:{searchButton:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},size:{type:String},buttonText:{type:String},buttonProps:{type:Object}},emits:{search:(e,t)=>!0},setup(e,{emit:t,slots:n}){const{size:u}=me(e),s=L("input-search"),{mergedSize:i}=ve(u),l=y(),p=m=>{l.value.inputRef&&t("search",l.value.inputRef.value,m)},o=()=>{var m;return d(Je,null,[e.loading?d(Me,null,null):d(Y,{onClick:p},{default:()=>[d(ie,null,null)]}),(m=n.suffix)==null?void 0:m.call(n)])},v=()=>{var m;let C={};return e.buttonText||n["button-default"]||n["button-icon"]?C={default:(m=n["button-default"])!=null?m:e.buttonText?()=>e.buttonText:void 0,icon:n["button-icon"]}:C={icon:()=>d(ie,null,null)},d(Te,N({type:"primary",class:`${s}-btn`,disabled:e.disabled,size:i.value,loading:e.loading},e.buttonProps,{onClick:p}),C)};return{inputRef:l,render:()=>d(B,{ref:l,class:s,size:i.value,disabled:e.disabled},{prepend:n.prepend,prefix:n.prefix,suffix:e.searchButton?n.suffix:o,append:e.searchButton?v:n.append})}},methods:{focus(){var e;(e=this.inputRef)==null||e.focus()},blur(){var e;(e=this.inputRef)==null||e.blur()}},render(){return this.render()}});const an=$({name:"IconEye",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const n=L("icon"),u=f(()=>[n,`${n}-eye`,{[`${n}-spin`]:e.spin}]),s=f(()=>{const l={};return e.size&&(l.fontSize=pe(e.size)?`${e.size}px`:e.size),e.rotate&&(l.transform=`rotate(${e.rotate}deg)`),l});return{cls:u,innerStyle:s,onClick:l=>{t("click",l)}}}}),ln=["stroke-width","stroke-linecap","stroke-linejoin"],on=M("path",{"clip-rule":"evenodd",d:"M24 37c6.627 0 12.627-4.333 18-13-5.373-8.667-11.373-13-18-13-6.627 0-12.627 4.333-18 13 5.373 8.667 11.373 13 18 13Z"},null,-1),rn=M("path",{d:"M29 24a5 5 0 1 1-10 0 5 5 0 0 1 10 0Z"},null,-1),sn=[on,rn];function un(e,t,n,u,s,i){return _(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:ne(e.cls),style:he(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...l)=>e.onClick&&e.onClick(...l))},sn,14,ln)}var U=R(an,[["render",un]]);const cn=Object.assign(U,{install:(e,t)=>{var n;const u=(n=t==null?void 0:t.iconPrefix)!=null?n:"";e.component(u+U.name,U)}}),dn=$({name:"IconEyeInvisible",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const n=L("icon"),u=f(()=>[n,`${n}-eye-invisible`,{[`${n}-spin`]:e.spin}]),s=f(()=>{const l={};return e.size&&(l.fontSize=pe(e.size)?`${e.size}px`:e.size),e.rotate&&(l.transform=`rotate(${e.rotate}deg)`),l});return{cls:u,innerStyle:s,onClick:l=>{t("click",l)}}}}),fn=["stroke-width","stroke-linecap","stroke-linejoin"],vn=M("path",{d:"M14 14.5c-2.69 2-5.415 5.33-8 9.5 5.373 8.667 11.373 13 18 13 3.325 0 6.491-1.09 9.5-3.271M17.463 12.5C19 11 21.75 11 24 11c6.627 0 12.627 4.333 18 13-1.766 2.848-3.599 5.228-5.5 7.14"},null,-1),pn=M("path",{d:"M29 24a5 5 0 1 1-10 0 5 5 0 0 1 10 0ZM6.852 7.103l34.294 34.294"},null,-1),mn=[vn,pn];function hn(e,t,n,u,s,i){return _(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:ne(e.cls),style:he(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...l)=>e.onClick&&e.onClick(...l))},mn,14,fn)}var J=R(dn,[["render",hn]]);const bn=Object.assign(J,{install:(e,t)=>{var n;const u=(n=t==null?void 0:t.iconPrefix)!=null?n:"";e.component(u+J.name,J)}}),gn=$({name:"InputPassword",components:{IconEye:cn,IconEyeInvisible:bn,AIconHover:Y,AInput:B},props:{invisibleButton:{type:Boolean,default:!0}},setup(){const e=y(),t=y(!0);return{inputRef:e,invisible:t,handleInvisible:()=>{t.value=!t.value}}},methods:{focus(){var e;(e=this.inputRef)==null||e.focus()},blur(){var e;(e=this.inputRef)==null||e.blur()}}});function yn(e,t,n,u,s,i){const l=j("icon-eye"),p=j("icon-eye-invisible"),o=j("a-icon-hover"),v=j("a-input");return _(),V(v,{ref:"inputRef",type:e.invisible?"password":"text"},Qe({_:2},[e.$slots.prepend?{name:"prepend",fn:I(()=>[S(e.$slots,"prepend")])}:void 0,e.$slots.prefix?{name:"prefix",fn:I(()=>[S(e.$slots,"prefix")])}:void 0,e.invisibleButton||e.$slots.suffix?{name:"suffix",fn:I(()=>[e.invisibleButton?(_(),V(o,{key:0,onClick:e.handleInvisible,onMousedown:t[0]||(t[0]=ue(()=>{},["prevent"])),onMouseup:t[1]||(t[1]=ue(()=>{},["prevent"]))},{default:I(()=>[e.invisible?(_(),V(p,{key:1})):(_(),V(l,{key:0}))]),_:1},8,["onClick"])):Xe("v-if",!0),S(e.$slots,"suffix")])}:void 0,e.$slots.append?{name:"append",fn:I(()=>[S(e.$slots,"append")])}:void 0]),1032,["type"])}var Q=R(gn,[["render",yn]]);const _n=$({name:"InputGroup",setup(){return{prefixCls:L("input-group")}}});function $n(e,t,n,u,s,i){return _(),ee("div",{class:ne(e.prefixCls)},[S(e.$slots,"default")],2)}var X=R(_n,[["render",$n]]);const Sn=Object.assign(B,{Search:K,Password:Q,Group:X,install:(e,t)=>{Fe(e,t);const n=We(t);e.component(n+B.name,B),e.component(n+X.name,X),e.component(n+K.name,K),e.component(n+Q.name,Q)}});export{Sn as I,cn as a,Ye as u};
