import{f as ze,k as Ce,g as ue,_ as de,l as Se,i as Ee,s as Ge,b as He}from"./index.d66503d3.js";import{a as Ze,j as Ve,k as Le,B as $e}from"./index.112b9d80.js";import{h as Je,u as Qe,f as Ye,I as Xe,P as et,g as tt}from"./utils.8eededf6.js";import"./index.5aad1f1f.js";/* empty css              */import{S as at,O as lt}from"./index.33960fc3.js";import{d as H,t as be,c as j,j as A,p as Te,o as b,a as E,b as T,n as W,S as rt,s as ye,r as K,u as We,L as Ie,I as it,g as te,h as I,w as $,q as ot,m as oe,i as ae,y as R,z as G,f,T as Me,k as ne,F as J,Q as ge,M as st,D as V,l as nt,_ as Ne,x as ut,O as dt,P as ct,G as ft,H as pt,A as ht}from"./index.51e79113.js";import{M as mt}from"./index.9138e464.js";import{R as gt,C as vt}from"./index.82123f5a.js";import{R as bt}from"./index.162d382c.js";import{I as yt}from"./index.de7ee226.js";import"./index.a7aeb9cf.js";import"./responsive-observe.34f7bf0c.js";import"./keyboard.9af3354b.js";import"./index.e2454c6d.js";const qe=(e,t)=>{if(!e||!t)return;const a=t.split(".");if(a.length===0)return;let l=e;for(let r=0;r<a.length;r++){if(!ze(l)&&!Ce(l)||!a[r])return;if(r!==a.length-1)l=l[a[r]];else return l[a[r]]}},Pe=(e,t,a)=>{if(!e||!t)return;const l=t.split(".");if(l.length===0)return;let r=e;for(let i=0;i<l.length;i++){if(!ze(r)&&!Ce(r)||!l[i])return;i!==l.length-1?r=r[l[i]]:r[l[i]]=a}},_t=H({name:"Form",props:{model:{type:Object,required:!0},layout:{type:String,default:"horizontal"},size:{type:String},labelColProps:{type:Object,default:()=>({span:5,offset:0})},wrapperColProps:{type:Object,default:()=>({span:19,offset:0})},labelColStyle:Object,wrapperColStyle:Object,labelAlign:{type:String,default:"right"},disabled:{type:Boolean,default:void 0},rules:{type:Object},autoLabelWidth:{type:Boolean,default:!1}},emits:{submit:(e,t)=>!0,submitSuccess:(e,t)=>!0,submitFailed:(e,t)=>!0},setup(e,{emit:t}){const a=ue("form"),{model:l,layout:r,disabled:i,labelAlign:s,labelColProps:n,wrapperColProps:g,labelColStyle:C,wrapperColStyle:w,size:p,rules:u}=be(e),{mergedSize:F}=Ze(p),q=j(()=>e.layout==="horizontal"&&e.autoLabelWidth),y=[],m=[],v=A({}),_=j(()=>Math.max(...Object.values(v))),Z=d=>{d&&d.field&&y.push(d)},le=d=>{d&&d.field&&y.splice(y.indexOf(d),1)},pe=d=>{y.forEach(h=>{d[h.field]&&h.setField(d[h.field])})},re=(d,h)=>{h&&v[h]!==d&&(v[h]=d)},D=d=>{d&&delete v[d]},he=d=>{const h=d?[].concat(d):[];y.forEach(O=>{(h.length===0||h.includes(O.field))&&O.resetField()})},B=d=>{const h=d?[].concat(d):[];y.forEach(O=>{(h.length===0||h.includes(O.field))&&O.clearValidate()})},me=d=>{const h=[];return y.forEach(O=>{h.push(O.validate())}),Promise.all(h).then(O=>{const S={};let L=!1;return O.forEach(o=>{o&&(L=!0,S[o.field]=o)}),Se(d)&&d(L?S:void 0),L?S:void 0})},ie=(d,h)=>{const O=[];for(const S of y)(Ce(d)&&d.includes(S.field)||d===S.field)&&O.push(S.validate());return Promise.all(O).then(S=>{const L={};let o=!1;return S.forEach(c=>{c&&(o=!0,L[c.field]=c)}),Se(h)&&h(o?L:void 0),o?L:void 0})},X=d=>{const h=[];y.forEach(O=>{h.push(O.validate())}),Promise.all(h).then(O=>{const S={};let L=!1;O.forEach(o=>{o&&(L=!0,S[o.field]=o)}),L?t("submitFailed",{values:l.value,errors:S},d):t("submitSuccess",l.value,d),t("submit",{values:l.value,errors:L?S:void 0},d)})};return Te(Ve,A({layout:r,disabled:i,labelAlign:s,labelColProps:n,wrapperColProps:g,labelColStyle:C,wrapperColStyle:w,model:l,size:F,rules:u,fields:y,touchedFields:m,addField:Z,removeField:le,validateField:ie,setLabelWidth:re,removeLabelWidth:D,maxLabelWidth:_,autoLabelWidth:q})),{cls:j(()=>[a,`${a}-layout-${e.layout}`,`${a}-size-${F.value}`,{[`${a}-auto-label-width`]:e.autoLabelWidth}]),handleSubmit:X,innerValidate:me,innerValidateField:ie,innerResetFields:he,innerClearValidate:B,innerSetFields:pe}},methods:{validate(e){return this.innerValidate(e)},validateField(e,t){return this.innerValidateField(e,t)},resetFields(e){return this.innerResetFields(e)},clearValidate(e){return this.innerClearValidate(e)},setFields(e){return this.innerSetFields(e)}}});function jt(e,t,a,l,r,i){return b(),E("form",{class:W(e.cls),onSubmit:t[0]||(t[0]=rt((...s)=>e.handleSubmit&&e.handleSubmit(...s),["prevent"]))},[T(e.$slots,"default")],34)}var ve=de(_t,[["render",jt]]),Q=Object.prototype.toString;function ce(e){return Q.call(e)==="[object Array]"}function N(e){return Q.call(e)==="[object Object]"}function _e(e){return Q.call(e)==="[object String]"}function Ct(e){return Q.call(e)==="[object Number]"&&e===e}function Vt(e){return Q.call(e)==="[object Boolean]"}function je(e){return Q.call(e)==="[object Function]"}function $t(e){return N(e)&&Object.keys(e).length===0}function U(e){return e==null||e===""}function De(e){return ce(e)&&!e.length}var we=function(e,t){if(typeof e!="object"||typeof t!="object")return e===t;if(je(e)&&je(t))return e===t||e.toString()===t.toString();if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var a in e){var l=we(e[a],t[a]);if(!l)return!1}return!0},wt=function(e,t){var a={};return Object.keys(e).forEach(function(l){var r=e[l],i=t&&t[l];a[l]=N(r)?Object.assign(Object.assign({},r),i):i||r}),a},Ft=function(e,t){for(var a=t.split("."),l=e,r=0;r<a.length;r++)if(l=l&&l[a[r]],l===void 0)return l;return l},z="`#{value}` is not a #{type} type",Ot={required:"#{field} is required",type:{ip:z,email:z,url:z,string:z,number:z,array:z,object:z,boolean:z},number:{min:"`#{value}` is not greater than `#{min}`",max:"`#{value}` is not less than `#{max}`",equal:"`#{value}` is not equal to `#{equal}`",range:"`#{value}` is not in range `#{min} ~ #{max}`",positive:"`#{value}` is not a positive number",negative:"`#{value}` is not a negative number"},array:{length:"The `#{value}` length is not equal to #{length}",minLength:"The `#{value}` length is not greater than #{minLength}",maxLength:"The `#{value}` length is not less than #{maxLength}",includes:"#{value} is not includes #{includes}",deepEqual:"#{value} is not deep equal with #{deepEqual}",empty:"`#{value}` is not an empty array"},string:{maxLength:"The `#{value}` length is not greater than #{maxLength}",minLength:"The `#{value}` length is not less than #{minLength}",length:"The `#{value}` length is not equal to #{length}",match:"`#{value}` is not match pattern #{pattern}",uppercase:"Expect `#{value}` to be uppercased",lowercase:"Expect `#{value}` to be lowercased"},object:{deepEqual:"`#{value}` is not deep equal with #{deepEqual}",hasKeys:"`#{value}` is not has keys #{keys}",empty:"`#{value}` is not an empty object"},boolean:{true:"Expect true but got `#{value}`",false:"Expect false but got `#{value}`"}},M=function(t,a){var l=this;this.getValidateMsg=function(r,i){i===void 0&&(i={});var s=Object.assign(Object.assign({},i),{value:l.obj,field:l.field,type:l.type}),n=Ft(l.validateMessages,r);return je(n)?n(s):_e(n)?n.replace(/\#\{.+?\}/g,function(g){var C=g.slice(2,-1);return C in s?N(s[C])||ce(s[C])?JSON.stringify(s[C]):String(s[C]):g}):n},N(a)&&_e(t)&&a.trim?this.obj=t.trim():N(a)&&a.ignoreEmptyString&&t===""?this.obj=void 0:this.obj=t,this.message=a.message,this.type=a.type,this.error=null,this.field=a.field||a.type,this.validateMessages=wt(Ot,a.validateMessages)},fe={not:{configurable:!0},isRequired:{configurable:!0},end:{configurable:!0}};fe.not.get=function(){return this._not=!this._not,this};fe.isRequired.get=function(){return(U(this.obj)||De(this.obj))&&(this.error={value:this.obj,type:this.type,requiredError:!0,message:this.message||(this._not?"[NOT MODE]:":"")+this.getValidateMsg("required")}),this};fe.end.get=function(){return this.error};M.prototype.addError=function(t){!this.error&&t&&(this.error={value:this.obj,type:this.type,message:this.message||(N(t)?t:(this._not?"[NOT MODE]:":"")+t)})};M.prototype.validate=function(t,a){var l=this._not?t:!t;return l&&this.addError(a),this};M.prototype.collect=function(t){t&&t(this.error)};Object.defineProperties(M.prototype,fe);var St=function(e){function t(l,r){e.call(this,l,Object.assign(Object.assign({},r),{type:"string"})),this.validate(r&&r.strict?_e(this.obj):!0,this.getValidateMsg("type.string"))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var a={uppercase:{configurable:!0},lowercase:{configurable:!0}};return t.prototype.maxLength=function(r){return this.obj?this.validate(this.obj.length<=r,this.getValidateMsg("string.maxLength",{maxLength:r})):this},t.prototype.minLength=function(r){return this.obj?this.validate(this.obj.length>=r,this.getValidateMsg("string.minLength",{minLength:r})):this},t.prototype.length=function(r){return this.obj?this.validate(this.obj.length===r,this.getValidateMsg("string.length",{length:r})):this},t.prototype.match=function(r){var i=r instanceof RegExp;return i&&(r.lastIndex=0),this.validate(this.obj===void 0||i&&r.test(this.obj),this.getValidateMsg("string.match",{pattern:r}))},a.uppercase.get=function(){return this.obj?this.validate(this.obj.toUpperCase()===this.obj,this.getValidateMsg("string.uppercase")):this},a.lowercase.get=function(){return this.obj?this.validate(this.obj.toLowerCase()===this.obj,this.getValidateMsg("string.lowercase")):this},Object.defineProperties(t.prototype,a),t}(M),Et=function(e){function t(l,r){e.call(this,l,Object.assign(Object.assign({},r),{type:"number"})),this.validate(r&&r.strict?Ct(this.obj):!0,this.getValidateMsg("type.number"))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var a={positive:{configurable:!0},negative:{configurable:!0}};return t.prototype.min=function(r){return U(this.obj)?this:this.validate(this.obj>=r,this.getValidateMsg("number.min",{min:r}))},t.prototype.max=function(r){return U(this.obj)?this:this.validate(this.obj<=r,this.getValidateMsg("number.max",{max:r}))},t.prototype.equal=function(r){return U(this.obj)?this:this.validate(this.obj===r,this.getValidateMsg("number.equal",{equal:r}))},t.prototype.range=function(r,i){return U(this.obj)?this:this.validate(this.obj>=r&&this.obj<=i,this.getValidateMsg("number.range",{min:r,max:i}))},a.positive.get=function(){return U(this.obj)?this:this.validate(this.obj>0,this.getValidateMsg("number.positive"))},a.negative.get=function(){return U(this.obj)?this:this.validate(this.obj<0,this.getValidateMsg("number.negative"))},Object.defineProperties(t.prototype,a),t}(M),Lt=function(e){function t(l,r){e.call(this,l,Object.assign(Object.assign({},r),{type:"array"})),this.validate(r&&r.strict?ce(this.obj):!0,this.getValidateMsg("type.array",{value:this.obj,type:this.type}))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var a={empty:{configurable:!0}};return t.prototype.length=function(r){return this.obj?this.validate(this.obj.length===r,this.getValidateMsg("array.length",{value:this.obj,length:r})):this},t.prototype.minLength=function(r){return this.obj?this.validate(this.obj.length>=r,this.getValidateMsg("array.minLength",{value:this.obj,minLength:r})):this},t.prototype.maxLength=function(r){return this.obj?this.validate(this.obj.length<=r,this.getValidateMsg("array.maxLength",{value:this.obj,maxLength:r})):this},t.prototype.includes=function(r){var i=this;return this.obj?this.validate(r.every(function(s){return i.obj.indexOf(s)!==-1}),this.getValidateMsg("array.includes",{value:this.obj,includes:r})):this},t.prototype.deepEqual=function(r){return this.obj?this.validate(we(this.obj,r),this.getValidateMsg("array.deepEqual",{value:this.obj,deepEqual:r})):this},a.empty.get=function(){return this.validate(De(this.obj),this.getValidateMsg("array.empty",{value:this.obj}))},Object.defineProperties(t.prototype,a),t}(M),Mt=function(e){function t(l,r){e.call(this,l,Object.assign(Object.assign({},r),{type:"object"})),this.validate(r&&r.strict?N(this.obj):!0,this.getValidateMsg("type.object"))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var a={empty:{configurable:!0}};return t.prototype.deepEqual=function(r){return this.obj?this.validate(we(this.obj,r),this.getValidateMsg("object.deepEqual",{deepEqual:r})):this},t.prototype.hasKeys=function(r){var i=this;return this.obj?this.validate(r.every(function(s){return i.obj[s]}),this.getValidateMsg("object.hasKeys",{keys:r})):this},a.empty.get=function(){return this.validate($t(this.obj),this.getValidateMsg("object.empty"))},Object.defineProperties(t.prototype,a),t}(M),qt=function(e){function t(l,r){e.call(this,l,Object.assign(Object.assign({},r),{type:"boolean"})),this.validate(r&&r.strict?Vt(this.obj):!0,this.getValidateMsg("type.boolean"))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var a={true:{configurable:!0},false:{configurable:!0}};return a.true.get=function(){return this.validate(this.obj===!0,this.getValidateMsg("boolean.true"))},a.false.get=function(){return this.validate(this.obj===!1,this.getValidateMsg("boolean.false"))},Object.defineProperties(t.prototype,a),t}(M),Pt=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,xt=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),At=/^(2(5[0-5]{1}|[0-4]\d{1})|[0-1]?\d{1,2})(\.(2(5[0-5]{1}|[0-4]\d{1})|[0-1]?\d{1,2})){3}$/,Rt=function(e){function t(l,r){e.call(this,l,Object.assign(Object.assign({},r),{type:"type"}))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var a={email:{configurable:!0},url:{configurable:!0},ip:{configurable:!0}};return a.email.get=function(){return this.type="email",this.validate(this.obj===void 0||Pt.test(this.obj),this.getValidateMsg("type.email"))},a.url.get=function(){return this.type="url",this.validate(this.obj===void 0||xt.test(this.obj),this.getValidateMsg("type.url"))},a.ip.get=function(){return this.type="ip",this.validate(this.obj===void 0||At.test(this.obj),this.getValidateMsg("type.ip"))},Object.defineProperties(t.prototype,a),t}(M),kt=function(e){function t(l,r){e.call(this,l,Object.assign(Object.assign({},r),{type:"custom"}))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var a={validate:{configurable:!0}};return a.validate.get=function(){var l=this;return function(r,i){var s;if(r)return s=r(l.obj,l.addError.bind(l)),s&&s.then?(i&&s.then(function(){i&&i(l.error)},function(n){console.error(n)}),[s,l]):(i&&i(l.error),l.error)}},Object.defineProperties(t.prototype,a),t}(M),zt=function(t,a){this.string=new St(t,a),this.number=new Et(t,a),this.array=new Lt(t,a),this.object=new Mt(t,a),this.boolean=new qt(t,a),this.type=new Rt(t,a),this.custom=new kt(t,a)},Be=function(t,a){a===void 0&&(a={}),this.schema=t,this.options=a};Be.prototype.validate=function(t,a){var l=this;if(!N(t))return;var r=[],i=null;function s(n,g){i||(i={}),(!i[n]||g.requiredError)&&(i[n]=g)}this.schema&&Object.keys(this.schema).forEach(function(n){if(ce(l.schema[n]))for(var g=function(p){var u=l.schema[n][p],F=u.type,q=u.message;if(!F&&!u.validator)throw"You must specify a type to field "+n+"!";var y=new zt(t[n],Object.assign(Object.assign({},l.options),{message:q,field:n})),m=y.type[F]||null;if(!m)if(u.validator){m=y.custom.validate(u.validator),Object.prototype.toString.call(m)==="[object Array]"&&m[0].then?r.push({function:m[0],_this:m[1],key:n}):m&&s(n,m);return}else m=y[F];if(Object.keys(u).forEach(function(v){u.required&&(m=m.isRequired),v!=="message"&&m[v]&&u[v]&&typeof m[v]=="object"&&(m=m[v]),m[v]&&u[v]!==void 0&&typeof m[v]=="function"&&(m=m[v](u[v]))}),m.collect(function(v){v&&s(n,v)}),i)return"break"},C=0;C<l.schema[n].length;C++){var w=g(C);if(w==="break")break}}),r.length>0?Promise.all(r.map(function(n){return n.function})).then(function(){r.forEach(function(n){n._this.error&&s(n.key,n._this.error)}),a&&a(i)}):a&&a(i)};const Tt=H({name:"FormItemLabel",components:{ResizeObserver:bt},props:{required:{type:Boolean,default:!1},showColon:{type:Boolean,default:!1},component:{type:String,default:"label"},attrs:Object},setup(){const e=ue("form-item-label"),t=ye(Ve,void 0),a=it(),l=K(),r=()=>{l.value&&Ee(l.value.offsetWidth)&&(t==null||t.setLabelWidth(l.value.offsetWidth,a==null?void 0:a.uid))};return We(()=>{l.value&&Ee(l.value.offsetWidth)&&(t==null||t.setLabelWidth(l.value.offsetWidth,a==null?void 0:a.uid))}),Ie(()=>{t==null||t.removeLabelWidth(a==null?void 0:a.uid)}),{prefixCls:e,labelRef:l,handleResize:r}}}),Wt=f("svg",{fill:"currentColor",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[f("path",{d:"M583.338667 17.066667c18.773333 0 34.133333 15.36 34.133333 34.133333v349.013333l313.344-101.888a34.133333 34.133333 0 0 1 43.008 22.016l42.154667 129.706667a34.133333 34.133333 0 0 1-21.845334 43.178667l-315.733333 102.4 208.896 287.744a34.133333 34.133333 0 0 1-7.509333 47.786666l-110.421334 80.213334a34.133333 34.133333 0 0 1-47.786666-7.509334L505.685333 706.218667 288.426667 1005.226667a34.133333 34.133333 0 0 1-47.786667 7.509333l-110.421333-80.213333a34.133333 34.133333 0 0 1-7.509334-47.786667l214.186667-295.253333L29.013333 489.813333a34.133333 34.133333 0 0 1-22.016-43.008l42.154667-129.877333a34.133333 34.133333 0 0 1 43.008-22.016l320.512 104.106667L412.672 51.2c0-18.773333 15.36-34.133333 34.133333-34.133333h136.533334z"})],-1),It=[Wt];function Nt(e,t,a,l,r,i){const s=te("ResizeObserver");return b(),I(s,{onResize:e.handleResize},{default:$(()=>[(b(),I(ot(e.component),oe({ref:"labelRef",class:e.prefixCls},e.attrs),{default:$(()=>[e.required?(b(),E("strong",{key:0,class:W(`${e.prefixCls}-required-symbol`)},It,2)):ae("v-if",!0),T(e.$slots,"default"),R(" "+G(e.showColon?":":""),1)]),_:3},16,["class"]))]),_:3},8,["onResize"])}var Dt=de(Tt,[["render",Nt]]);const Bt=H({name:"FormItemMessage",props:{error:Array,help:String},setup(){return{prefixCls:ue("form-item-message")}}});function Ut(e,t,a,l,r,i){return e.help||e.$slots.help?(b(),I(Me,{key:0,name:"form-blink",appear:""},{default:$(()=>[f("div",{class:W([e.prefixCls,`${e.prefixCls}-help`])},[T(e.$slots,"help",{},()=>[R(G(e.help),1)])],2)]),_:3})):(b(!0),E(J,{key:1},ne(e.error,s=>(b(),I(Me,{key:s,name:"form-blink",appear:""},{default:$(()=>[f("div",{role:"alert",class:W([e.prefixCls])},G(s),3)]),_:2},1024))),128))}var Kt=de(Bt,[["render",Ut]]);const xe=["success","warning","error","validating"],Gt=e=>{let t="";for(const a of Object.keys(e)){const l=e[a];l&&(!t||xe.indexOf(l)>xe.indexOf(t))&&(t=e[a])}return t},Ht=e=>{const t=[];for(const a of Object.keys(e)){const l=e[a];l&&t.push(l)}return t};var Zt=Object.defineProperty,Ae=Object.getOwnPropertySymbols,Jt=Object.prototype.hasOwnProperty,Qt=Object.prototype.propertyIsEnumerable,Re=(e,t,a)=>t in e?Zt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,ke=(e,t)=>{for(var a in t||(t={}))Jt.call(t,a)&&Re(e,a,t[a]);if(Ae)for(var a of Ae(t))Qt.call(t,a)&&Re(e,a,t[a]);return e};const Yt=H({name:"FormItem",components:{ArcoRow:gt,ArcoCol:vt,FormItemLabel:Dt,FormItemMessage:Kt},props:{field:{type:String,default:""},label:String,showColon:{type:Boolean,default:!1},noStyle:{type:Boolean,default:!1},disabled:{type:Boolean,default:void 0},help:String,extra:String,required:{type:Boolean,default:!1},rules:{type:[Object,Array]},validateStatus:{type:String},validateTrigger:{type:[String,Array],default:"change"},labelColProps:Object,wrapperColProps:Object,hideLabel:{type:Boolean,default:!1},hideAsterisk:{type:Boolean,default:!1},labelColStyle:Object,wrapperColStyle:Object,rowProps:Object,rowClass:[String,Array,Object],contentClass:[String,Array,Object],contentFlex:{type:Boolean,default:!0},mergeProps:{type:[Boolean,Function],default:!0},labelColFlex:{type:[Number,String]},feedback:{type:Boolean,default:!1},labelComponent:{type:String,default:"label"},labelAttrs:Object},setup(e){const t=ue("form-item"),{field:a}=be(e),l=ye(Ve,{}),{autoLabelWidth:r,layout:i}=be(l),s=j(()=>{var o;const c=ke({},(o=e.labelColProps)!=null?o:l.labelColProps);return e.labelColFlex?c.flex=e.labelColFlex:l.autoLabelWidth&&(c.flex=`${l.maxLabelWidth}px`),c}),n=j(()=>{var o;const c=ke({},(o=e.wrapperColProps)!=null?o:l.wrapperColProps);return(e.labelColFlex||l.autoLabelWidth)&&(c.flex="auto"),c}),g=j(()=>{var o;return(o=e.labelColStyle)!=null?o:l.labelColStyle}),C=j(()=>{var o;return(o=e.wrapperColStyle)!=null?o:l.wrapperColStyle}),w=qe(l.model,e.field),p=A({}),u=A({}),F=j(()=>Gt(p)),q=j(()=>Ht(u)),y=K(!1),m=j(()=>qe(l.model,e.field)),v=j(()=>{var o;return Boolean((o=e.disabled)!=null?o:l==null?void 0:l.disabled)}),_=j(()=>{var o;return(o=e.validateStatus)!=null?o:F.value}),Z=j(()=>F.value==="error"),le=j(()=>{var o,c,P;const ee=[].concat((P=(c=e.rules)!=null?c:(o=l==null?void 0:l.rules)==null?void 0:o[e.field])!=null?P:[]),k=ee.some(x=>x.required);return e.required&&!k?[{required:!0}].concat(ee):ee}),pe=j(()=>le.value.some(o=>o.required)),re=e.noStyle?ye(Le,void 0):void 0,D=(o,{status:c,message:P})=>{p[o]=c,u[o]=P,e.noStyle&&(re==null||re.updateValidateState(o,{status:c,message:P}))},he=j(()=>e.feedback&&_.value?_.value:void 0),B=()=>{if(y.value)return Promise.resolve();const o=le.value;if(!a.value||o.length===0)return F.value&&X(),Promise.resolve();const c=a.value,P=m.value;D(c,{status:"",message:""});const ee=new Be({[c]:o.map(k=>(!k.type&&!k.validator&&(k.type="string"),k))},{ignoreEmptyString:!0});return new Promise(k=>{ee.validate({[c]:P},x=>{var Fe;const Oe=Boolean(x==null?void 0:x[c]);D(c,{status:Oe?"error":"",message:(Fe=x==null?void 0:x[c].message)!=null?Fe:""});const Ke=Oe?{label:e.label,field:a.value,value:x[c].value,type:x[c].type,isRequiredError:Boolean(x[c].requiredError),message:x[c].message}:void 0;k(Ke)})})},me=j(()=>[].concat(e.validateTrigger)),ie=j(()=>me.value.reduce((o,c)=>{switch(c){case"change":return o.onChange=()=>{B()},o;case"input":return o.onInput=()=>{ge(()=>{B()})},o;case"focus":return o.onFocus=()=>{B()},o;case"blur":return o.onBlur=()=>{B()},o;default:return o}},{}));Te(Le,A({eventHandlers:ie,size:l&&st(l,"size"),disabled:v,error:Z,feedback:he,updateValidateState:D}));const X=()=>{a.value&&D(a.value,{status:"",message:""})},h=A({field:a,disabled:v,error:Z,validate:B,clearValidate:X,resetField:()=>{X(),y.value=!0,(l==null?void 0:l.model)&&a.value&&Pe(l.model,a.value,w),ge(()=>{y.value=!1})},setField:o=>{var c,P;a.value&&(y.value=!0,"value"in o&&(l==null?void 0:l.model)&&a.value&&Pe(l.model,a.value,o.value),(o.status||o.message)&&D(a.value,{status:(c=o.status)!=null?c:"",message:(P=o.message)!=null?P:""}),ge(()=>{y.value=!1}))}});We(()=>{var o;h.field&&((o=l.addField)==null||o.call(l,h))}),Ie(()=>{var o;h.field&&((o=l.removeField)==null||o.call(l,h))});const O=j(()=>[t,`${t}-layout-${l.layout}`,{[`${t}-error`]:Z.value,[`${t}-status-${_.value}`]:Boolean(_.value)},e.rowClass]),S=j(()=>[`${t}-label-col`,{[`${t}-label-col-left`]:l.labelAlign==="left",[`${t}-label-col-flex`]:l.autoLabelWidth||e.labelColFlex}]),L=j(()=>[`${t}-wrapper-col`,{[`${t}-wrapper-col-flex`]:!n.value}]);return{prefixCls:t,cls:O,isRequired:pe,isError:Z,finalMessage:q,mergedLabelCol:s,mergedWrapperCol:n,labelColCls:S,autoLabelWidth:r,layout:i,mergedLabelStyle:g,wrapperColCls:L,mergedWrapperStyle:C}}});function Xt(e,t,a,l,r,i){var s;const n=te("FormItemLabel"),g=te("ArcoCol"),C=te("FormItemMessage"),w=te("ArcoRow");return e.noStyle?T(e.$slots,"default",{key:0}):(b(),I(w,oe({key:1,class:[e.cls,{[`${e.prefixCls}-has-help`]:Boolean((s=e.$slots.help)!=null?s:e.help)}],wrap:!(e.labelColFlex||e.autoLabelWidth),div:e.layout!=="horizontal"||e.hideLabel},e.rowProps),{default:$(()=>[e.hideLabel?ae("v-if",!0):(b(),I(g,oe({key:0,class:e.labelColCls,style:e.mergedLabelStyle},e.mergedLabelCol),{default:$(()=>[V(n,{required:e.hideAsterisk?!1:e.isRequired,"show-colon":e.showColon,component:e.labelComponent,attrs:e.labelAttrs},{default:$(()=>[e.$slots.label||e.label?T(e.$slots,"label",{key:0},()=>[R(G(e.label),1)]):ae("v-if",!0)]),_:3},8,["required","show-colon","component","attrs"])]),_:3},16,["class","style"])),V(g,oe({class:e.wrapperColCls,style:e.mergedWrapperStyle},e.mergedWrapperCol),{default:$(()=>[f("div",{class:W(`${e.prefixCls}-content-wrapper`)},[f("div",{class:W([`${e.prefixCls}-content`,{[`${e.prefixCls}-content-flex`]:e.contentFlex},e.contentClass])},[T(e.$slots,"default")],2)],2),e.isError||e.$slots.help||e.help?(b(),I(C,{key:0,error:e.finalMessage,help:e.help},nt({_:2},[e.$slots.help?{name:"help",fn:$(()=>[T(e.$slots,"help")])}:void 0]),1032,["error","help"])):ae("v-if",!0),e.$slots.extra||e.extra?(b(),E("div",{key:1,class:W(`${e.prefixCls}-extra`)},[T(e.$slots,"extra",{},()=>[R(G(e.extra),1)])],2)):ae("v-if",!0)]),_:3},16,["class","style"])]),_:3},16,["class","wrap","div"]))}var se=de(Yt,[["render",Xt]]);const ea=Object.assign(ve,{Item:se,install:(e,t)=>{Ge(e,t);const a=He(t);e.component(a+ve.name,ve),e.component(a+se.name,se)}});function ta(){return new Promise((e,t)=>{const a=document.createElement("input");a.type="file",a.accept="video/*",a.multiple=!1,a.onchange=()=>{if(a.files!=null&&a.files.length>0){const l=a.files.item(0);l&&e(Je(l))}t("\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25\uFF01")},a.click()})}const Y=e=>(ft("data-v-9dbc2722"),e=e(),pt(),e),aa={class:"setting"},la=Y(()=>f("span",null,"\u5E27\u6570 :",-1)),ra=Y(()=>f("span",null,"\u5BBD\u5EA6:",-1)),ia=Y(()=>f("span",null,"\u9AD8\u5EA6:",-1)),oa=Y(()=>f("span",null,"\u5F00\u59CB\u65F6\u95F4:",-1)),sa=Y(()=>f("span",null,"\u7ED3\u675F\u65F6\u95F4:",-1)),na=Y(()=>f("span",null,"\u6587\u4EF6\u683C\u5F0F:",-1)),ua=R(" \u5F00\u59CB\u8F6C\u6362 "),da=H({__name:"FormatSetting",props:{fileInfo:null},emits:["change"],setup(e,{emit:t}){const a=e,l=["gif","mp4","avi","webm","mpeg","flv"],r=K(!1),i=A({type:"video",outputName:"output",filename:"",frameRate:25,rangeStart:0,rangeEnd:10,width:0,height:0,fileType:"gif"}),s=K(0),{ffmpeg:n,writeFile:g,ffmpegRun:C}=Qe();ut(()=>a.fileInfo,p=>{p&&(i.width=p==null?void 0:p.width,i.height=p==null?void 0:p.height,i.rangeEnd=p==null?void 0:p.duration)}),n.setProgress(({time:p})=>{const u=p>=0?p:0;s.value=Ye(u/i.rangeEnd,2)});async function w(){var q;const p=(q=a.fileInfo)==null?void 0:q.file;if(!p)return;r.value=!0,await g(p);const{url:u,size:F}=await C({...i,filename:p.name});t("change",{url:u,size:F,type:i.fileType}),r.value=!1}return(p,u)=>{const F=Xe,q=lt,y=at,m=$e,v=et;return b(),E("div",aa,[f("div",null,[la,V(F,{type:"text",modelValue:i.frameRate,"onUpdate:modelValue":u[0]||(u[0]=_=>i.frameRate=_)},null,8,["modelValue"])]),f("div",null,[ra,V(F,{type:"text",modelValue:i.width,"onUpdate:modelValue":u[1]||(u[1]=_=>i.width=_)},null,8,["modelValue"])]),f("div",null,[ia,V(F,{type:"text",modelValue:i.height,"onUpdate:modelValue":u[2]||(u[2]=_=>i.height=_)},null,8,["modelValue"])]),f("div",null,[oa,V(F,{type:"text",modelValue:i.rangeStart,"onUpdate:modelValue":u[3]||(u[3]=_=>i.rangeStart=_)},null,8,["modelValue"])]),f("div",null,[sa,V(F,{type:"text",modelValue:i.rangeEnd,"onUpdate:modelValue":u[4]||(u[4]=_=>i.rangeEnd=_)},null,8,["modelValue"])]),f("div",null,[na,V(y,{"w-320i":"",modelValue:i.fileType,"onUpdate:modelValue":u[5]||(u[5]=_=>i.fileType=_)},{default:$(()=>[(b(),E(J,null,ne(l,_=>V(q,{value:_,key:_},{default:$(()=>[R(G(_.toUpperCase()),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),f("div",null,[V(m,{loading:r.value,onClick:w,type:"primary","mr-10":""},{default:$(()=>[ua]),_:1},8,["loading"]),dt(V(v,{percent:s.value,max:100,min:0,"w-200i":""},null,8,["percent"]),[[ct,s.value||r.value]])])])}}});var ca=Ne(da,[["__scopeId","data-v-9dbc2722"]]);const fa={flex:"","mb-10":"","b-1":"","b-rd-10":""},pa={"f-ac":"","wp-50":"","p-10":""},ha=["src"],ma=["src"],ga={"wp-50":"","p-10":"","b-l-1":""},va=f("div",{"fs-20":"","fw-700":"","ml-10":"","mb-10":""},"\u6587\u4EF6\u4FE1\u606F",-1),ba=f("span",null,"M",-1),ya={"f-ac-jc":""},_a=R(" \u9884\u89C8 "),ja=R(" \u4E0B\u8F7D "),Ca=["src"],Va=["src"],$a=H({__name:"FormatCard",props:{file:null},setup(e){const t=e,a=K(!1),l=j(()=>(t.file.size/1e6).toFixed(2)),r=K("output");return(i,s)=>{const n=yt,g=se,C=ea,w=$e,p=mt;return b(),E(J,null,[f("div",fa,[f("div",pa,[e.file.type==="gif"?(b(),E("img",{key:0,src:e.file.url,"wp-100":""},null,8,ha)):(b(),E("video",{key:1,src:e.file.url,autoplay:"",loop:"","wp-100":""},null,8,ma))]),f("div",ga,[va,V(C,{model:{},"label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:$(()=>[V(g,{label:"\u5927\u5C0F"},{default:$(()=>[V(n,{"model-value":ht(l),disabled:""},{suffix:$(()=>[ba]),_:1},8,["model-value"])]),_:1}),V(g,{field:"output",label:"\u540D\u5B57"},{default:$(()=>[V(n,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=u=>r.value=u)},{suffix:$(()=>[f("span",null,"."+G(e.file.type),1)]),_:1},8,["modelValue"])]),_:1})]),_:1}),f("div",ya,[V(w,{"w-60":"","mr-20":"",size:"small",type:"outline",onClick:s[1]||(s[1]=u=>a.value=!0)},{default:$(()=>[_a]),_:1}),V(w,{"w-60":"",size:"small",type:"primary",href:e.file.url,download:`${r.value}.${e.file.type}`},{default:$(()=>[ja]),_:1},8,["href","download"])])])]),V(p,{title:`output.${e.file.type}`,visible:a.value,footer:!1,onCancel:s[2]||(s[2]=u=>a.value=!1),width:"80%"},{default:$(()=>[e.file.type==="gif"?(b(),E("img",{key:0,src:e.file.url},null,8,Ca)):(b(),E("video",{key:1,src:e.file.url,autoplay:"",loop:""},null,8,Va))]),_:1},8,["title","visible"])],64)}}});const wa={"mb-20":""},Fa=R("\u4E0A\u4F20\u6587\u4EF6"),Oa={flex:"","b-1":""},Sa={"wp-50":"","p-20":"","b-r-1":""},Ea=["onClick"],La=["src"],Ma={"wp-50":"","p-20":"",class:"right"},qa=H({__name:"VideoFormat",setup(e){const t=A([]),a=K({}),l=A([]);async function r(){const n=await ta(),g=await tt(n);i(g),t.push(g)}function i(n){a.value=n}function s(n){l.push(n)}return(n,g)=>{const C=$e;return b(),E(J,null,[f("div",wa,[V(C,{onClick:r,type:"primary"},{default:$(()=>[Fa]),_:1})]),f("div",Oa,[f("div",Sa,[V(ca,{fileInfo:a.value,onChange:s},null,8,["fileInfo"]),(b(!0),E(J,null,ne(t,w=>(b(),E("div",{class:W(["video-box",a.value.id===w.id&&"selected"]),key:w.id,onClick:p=>i(w)},[f("video",{src:w.url,"h-300":"",autoplay:"",loop:""},null,8,La)],10,Ea))),128))]),f("div",Ma,[(b(!0),E(J,null,ne(l,w=>(b(),I($a,{file:w},null,8,["file"]))),256))])])],64)}}});var Ha=Ne(qa,[["__scopeId","data-v-053b1992"]]);export{Ha as default};
