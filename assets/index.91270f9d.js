import{d as w,u as L,N as H,v as N,g as c,o as i,a as y,n as h,b as C,h as f,i as _,f as F,B as m,w as T,U as A,M as V,j as z,$ as O,r as D}from"./index.4b01108f.js";import{I as G,f as Y,h as q,i as J,e as K,u as Q,m as R,M as W}from"./use-popup-manager.b89a1cc3.js";import{I as X,g as k,_ as Z,x as b,e as x,b as ee,j as se}from"./index.cdfcc5d8.js";import{I as oe}from"./index.45f5c73b.js";const te=w({name:"Message",components:{AIconHover:G,IconInfoCircleFill:oe,IconCheckCircleFill:Y,IconExclamationCircleFill:q,IconCloseCircleFill:J,IconClose:K,IconLoading:X},props:{type:{type:String,default:"info"},closable:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!0},duration:{type:Number,default:3e3},resetOnUpdate:{type:Boolean,default:!1},resetOnHover:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:s}){const o=k("message");let l=0;const r=()=>{s("close")},t=()=>{e.duration>0&&(l=window.setTimeout(r,e.duration))},n=()=>{l&&(window.clearTimeout(l),l=0)};return L(()=>{t()}),H(()=>{e.resetOnUpdate&&(n(),t())}),N(()=>{n()}),{handleMouseEnter:()=>{e.resetOnHover&&n()},handleMouseLeave:()=>{e.resetOnHover&&t()},prefixCls:o,handleClose:r}}});function ne(e,s,o,l,r,t){const n=c("icon-info-circle-fill"),a=c("icon-check-circle-fill"),u=c("icon-exclamation-circle-fill"),E=c("icon-close-circle-fill"),j=c("icon-loading"),B=c("icon-close"),U=c("a-icon-hover");return i(),y("li",{role:"alert",class:h([e.prefixCls,`${e.prefixCls}-${e.type}`,{[`${e.prefixCls}-closable`]:e.closable}]),onMouseenter:s[1]||(s[1]=(...p)=>e.handleMouseEnter&&e.handleMouseEnter(...p)),onMouseleave:s[2]||(s[2]=(...p)=>e.handleMouseLeave&&e.handleMouseLeave(...p))},[e.showIcon&&!(e.type==="normal"&&!e.$slots.icon)?(i(),y("span",{key:0,class:h(`${e.prefixCls}-icon`)},[C(e.$slots,"icon",{},()=>[e.type==="info"?(i(),f(n,{key:0})):e.type==="success"?(i(),f(a,{key:1})):e.type==="warning"?(i(),f(u,{key:2})):e.type==="error"?(i(),f(E,{key:3})):e.type==="loading"?(i(),f(j,{key:4})):_("v-if",!0)])],2)):_("v-if",!0),F("span",{class:h(`${e.prefixCls}-content`)},[C(e.$slots,"default")],2),e.closable?(i(),y("span",{key:1,class:h(`${e.prefixCls}-close-btn`),onClick:s[0]||(s[0]=(...p)=>e.handleClose&&e.handleClose(...p))},[m(U,null,{default:T(()=>[m(B)]),_:1})],2)):_("v-if",!0)],34)}var ae=Z(te,[["render",ne]]);function re(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!V(e)}var le=w({name:"MessageList",props:{messages:{type:Array,default:()=>[]},position:{type:String,default:"top"}},emits:["close","afterClose"],setup(e,s){const o=k("message-list"),{zIndex:l}=Q("message",{runOnMounted:!0});return()=>{let r;return m(A,{class:[o,`${o}-${e.position}`],name:"fade-message",tag:"ul",style:{zIndex:l.value},onAfterLeave:()=>s.emit("afterClose")},re(r=e.messages.map(t=>{const n={default:b(t.content),icon:b(t.icon)};return m(ae,{key:t.id,type:t.type,duration:t.duration,closable:t.closable,resetOnUpdate:t.resetOnUpdate,resetOnHover:t.resetOnHover,onClose:()=>s.emit("close",t.id)},n)}))?r:{default:()=>[r]})}}}),ie=Object.defineProperty,ce=Object.defineProperties,ue=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,I=(e,s,o)=>s in e?ie(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,v=(e,s)=>{for(var o in s||(s={}))de.call(s,o)&&I(e,o,s[o]);if(M)for(var o of M(s))pe.call(s,o)&&I(e,o,s[o]);return e},P=(e,s)=>ce(e,ue(s));class fe{constructor(s,o){this.messageCount=0,this.add=t=>{var n;this.messageCount++;const a=(n=t.id)!=null?n:`__arco_message_${this.messageCount}`;if(this.messageIds.has(a))return this.update(a,t);const u=z(v({id:a},t));return this.messages.value.push(u),this.messageIds.add(a),{close:()=>this.remove(a)}},this.update=(t,n)=>{for(let a=0;a<this.messages.value.length;a++)if(this.messages.value[a].id===t){const u=!ee(n.duration);Object.assign(this.messages.value[a],P(v({},n),{id:t,resetOnUpdate:u}));break}return{close:()=>this.remove(t)}},this.remove=t=>{for(let n=0;n<this.messages.value.length;n++){const a=this.messages.value[n];if(a.id===t){se(a.onClose)&&a.onClose(t),this.messages.value.splice(n,1),this.messageIds.delete(t);break}}},this.clear=()=>{this.messages.value.splice(0)},this.destroy=()=>{this.messages.value.length===0&&this.container&&(O(null,this.container),document.body.removeChild(this.container),this.container=null,d[this.position]=void 0)};const{position:l="top"}=s;this.container=R("message"),this.messageIds=new Set,this.messages=D([]),this.position=l;const r=m(le,{messages:this.messages.value,position:l,onClose:this.remove,onAfterClose:this.destroy});(o!=null?o:$._context)&&(r.appContext=o!=null?o:$._context),O(r,this.container),document.body.appendChild(this.container)}}const d={},S=[...W,"loading","normal"],g=S.reduce((e,s)=>(e[s]=(o,l)=>{x(o)&&(o={content:o});const r=v({type:s},o),{position:t="top"}=r;return d[t]||(d[t]=new fe(r,l)),d[t].add(r)},e),{});g.clear=e=>{var s;e?(s=d[e])==null||s.clear():Object.values(d).forEach(o=>o==null?void 0:o.clear())};const $=P(v({},g),{install:e=>{const s={clear:g.clear};for(const o of S)s[o]=(l,r=e._context)=>g[o](l,r);e.config.globalProperties.$message=s},_context:null});export{$ as M};
