import{g as U,i as N,_ as Y,f as Te,e as ct,s as dt,b as ft,B as Lt,H as Ke,d as Et,m as Pt,G as zt}from"./index.c381f74d.js";import{a as Ye,r as Je,I as Ot}from"./index.23eb16a0.js";import{d as G,c as g,o as m,a as $,n as y,e as A,f as j,r as re,u as De,v as Ae,t as pt,x as jt,D as O,F as ye,L as Nt,g as I,b as Z,h as D,i as J,w as ge,V as Bt,K as Mt,j as It,$ as Xe,y as Re,z as xe,k as mt,l as Ce,Y as _e,a0 as Fe}from"./index.f7405401.js";import{a as Wt,b as ht,g as Tt,K as Ze,B as Qe,I as Dt,i as At,j as Ue,k as Rt,d as xt,e as Ut,M as Gt}from"./index.cc387772.js";import{I as Vt,a as Ht,c as qt}from"./index.3577ae35.js";const Kt=G({name:"IconUp",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},spin:Boolean},setup(e){const t=U("icon"),r=g(()=>[t,`${t}-up`,{[`${t}-spin`]:e.spin}]),o=g(()=>{if(e.size)return{fontSize:N(e.size)?`${e.size}px`:e.size}});return{cls:r,sizeStyle:o}}}),Yt=["stroke-width","stroke-linecap","stroke-linejoin"],Jt=j("path",{d:"M39.6 30.557 24.043 15 8.487 30.557"},null,-1),Xt=[Jt];function Zt(e,t,r,o,a,s){return m(),$("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:y(e.cls),style:A(e.sizeStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},Xt,14,Yt)}var Le=Y(Kt,[["render",Zt]]);const Qt=Object.assign(Le,{install:(e,t)=>{var r;const o=(r=t==null?void 0:t.iconPrefix)!=null?r:"";e.component(o+Le.name,Le)}});function et(e){return Te(e)}function vo(e,t,r=!1){const o=re({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),a=g(()=>{let u=t;if(et(e.value))for(let f=0;f<Ye.length;f++){const p=Ye[f];if((o.value[p]||p==="xs"&&r)&&e.value[p]!==void 0){u=e.value[p];break}}else u=e.value;return u});let s="";return De(()=>{s=Je.subscribe(u=>{et(e.value)&&(o.value=u)})}),Ae(()=>{s&&Je.unsubscribe(s)}),a}function Ge(e,t){return t===void 0&&(t=15),+parseFloat(Number(e).toPrecision(t))}function K(e){var t=e.toString().split(/[eE]/),r=(t[0].split(".")[1]||"").length-+(t[1]||0);return r>0?r:0}function fe(e){if(e.toString().indexOf("e")===-1)return Number(e.toString().replace(".",""));var t=K(e);return t>0?Ge(Number(e)*Math.pow(10,t)):Number(e)}function We(e){yt&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&console.warn(e+" is beyond boundary when transfer to integer, the results may not be accurate")}function be(e,t){var r=e[0],o=e[1],a=e.slice(2),s=t(r,o);return a.forEach(function(u){s=t(s,u)}),s}function X(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length>2)return be(e,X);var r=e[0],o=e[1],a=fe(r),s=fe(o),u=K(r)+K(o),f=a*s;return We(f),f/Math.pow(10,u)}function gt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length>2)return be(e,gt);var r=e[0],o=e[1],a=Math.pow(10,Math.max(K(r),K(o)));return(X(r,a)+X(o,a))/a}function vt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length>2)return be(e,vt);var r=e[0],o=e[1],a=Math.pow(10,Math.max(K(r),K(o)));return(X(r,a)-X(o,a))/a}function Ve(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length>2)return be(e,Ve);var r=e[0],o=e[1],a=fe(r),s=fe(o);return We(a),We(s),X(a/s,Ge(Math.pow(10,K(o)-K(r))))}function er(e,t){var r=Math.pow(10,t),o=Ve(Math.round(Math.abs(X(e,r))),r);return e<0&&o!==0&&(o=X(o,-1)),o}var yt=!0;function tr(e){e===void 0&&(e=!0),yt=e}var se={strip:Ge,plus:gt,minus:vt,times:X,divide:Ve,round:er,digitLength:K,float2Fixed:fe,enableBoundaryChecking:tr};const rr=G({name:"IconPlus",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},spin:Boolean},setup(e){const t=U("icon"),r=g(()=>[t,`${t}-plus`,{[`${t}-spin`]:e.spin}]),o=g(()=>{if(e.size)return{fontSize:N(e.size)?`${e.size}px`:e.size}});return{cls:r,sizeStyle:o}}}),nr=["stroke-width","stroke-linecap","stroke-linejoin"],or=j("path",{d:"M5 24h38M24 5v38"},null,-1),sr=[or];function ir(e,t,r,o,a,s){return m(),$("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:y(e.cls),style:A(e.sizeStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},sr,14,nr)}var Ee=Y(rr,[["render",ir]]);const ar=Object.assign(Ee,{install:(e,t)=>{var r;const o=(r=t==null?void 0:t.iconPrefix)!=null?r:"";e.component(o+Ee.name,Ee)}}),lr=G({name:"IconMinus",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},spin:Boolean},setup(e){const t=U("icon"),r=g(()=>[t,`${t}-minus`,{[`${t}-spin`]:e.spin}]),o=g(()=>{if(e.size)return{fontSize:N(e.size)?`${e.size}px`:e.size}});return{cls:r,sizeStyle:o}}}),ur=["stroke-width","stroke-linecap","stroke-linejoin"],cr=j("path",{d:"M5 24h38"},null,-1),dr=[cr];function fr(e,t,r,o,a,s){return m(),$("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:y(e.cls),style:A(e.sizeStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},dr,14,ur)}var Pe=Y(lr,[["render",fr]]);const pr=Object.assign(Pe,{install:(e,t)=>{var r;const o=(r=t==null?void 0:t.iconPrefix)!=null?r:"";e.component(o+Pe.name,Pe)}}),mr=150;se.enableBoundaryChecking(!1);var ze=G({name:"InputNumber",props:{modelValue:Number,defaultValue:Number,mode:{type:String,default:"embed"},precision:Number,step:{type:Number,default:1},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},formatter:{type:Function},parser:{type:Function},placeholder:String,hideButton:{type:Boolean,default:!1},size:{type:String},allowClear:{type:Boolean,default:!1},modelEvent:{type:String,default:"change"}},emits:{"update:modelValue":e=>!0,change:(e,t)=>!0,focus:e=>!0,blur:e=>!0,clear:e=>!0,input:(e,t,r)=>!0},setup(e,{emit:t,slots:r}){var o;const{size:a,disabled:s}=pt(e),u=U("input-number"),f=re(),{mergedSize:p,mergedDisabled:h,eventHandlers:k}=Wt({size:a,disabled:s}),{mergedSize:S}=ht(p),R=g(()=>{if(N(e.precision)){const n=`${e.step}`.split(".")[1],i=n&&n.length||0;return Math.max(i,e.precision)}}),V=n=>{var i,c;if(!N(n))return"";const d=R.value?n.toFixed(R.value):String(n);return(c=(i=e.formatter)==null?void 0:i.call(e,d))!=null?c:d},z=re(V((o=e.modelValue)!=null?o:e.defaultValue)),L=g(()=>{var n,i;if(!z.value)return;const c=Number((i=(n=e.parser)==null?void 0:n.call(e,z.value))!=null?i:z.value);return Number.isNaN(c)?void 0:c}),W=re(N(L.value)&&L.value<=e.min),C=re(N(L.value)&&L.value>=e.max);let H=0;const v=()=>{H&&(window.clearTimeout(H),H=0)},w=n=>{if(!ct(n))return N(e.min)&&n<e.min&&(n=e.min),N(e.max)&&n>e.max&&(n=e.max),N(R.value)?se.round(n,R.value):n},_=n=>{let i=!1,c=!1;N(n)&&(n<=e.min&&(i=!0),n>=e.max&&(c=!0)),C.value!==c&&(C.value=c),W.value!==i&&(W.value=i)},T=(n,i)=>{if(h.value||n==="plus"&&C.value||n==="minus"&&W.value)return;let c;N(L.value)?c=w(se[n](L.value,e.step)):c=e.min===-1/0?0:e.min,z.value=V(c),_(c),t("update:modelValue",c),t("change",c,i)},E=(n,i,c=!1)=>{var d;n.preventDefault(),(d=f.value)==null||d.focus(),T(i,n),c&&(H=window.setTimeout(()=>n.target.dispatchEvent(n),mr))},q=(n,i)=>{var c,d,b,P;n=n.trim().replace(/ã€‚/g,"."),n=(d=(c=e.parser)==null?void 0:c.call(e,n))!=null?d:n,(N(Number(n))||/^(\.|-)$/.test(n))&&(z.value=(P=(b=e.formatter)==null?void 0:b.call(e,n))!=null?P:n,_(L.value),e.modelEvent==="input"&&t("update:modelValue",L.value),t("input",L.value,z.value,i))},pe=n=>{t("focus",n)},te=(n,i)=>{const c=w(L.value),d=V(c);(c!==L.value||z.value!==d)&&(z.value=d,_(c)),t("update:modelValue",c),t("change",c,i)},$e=n=>{t("blur",n)},me=n=>{var i,c;z.value="",t("update:modelValue",void 0),t("change",void 0,n),(c=(i=k.value)==null?void 0:i.onChange)==null||c.call(i,n),t("clear",n)},ke=Tt(new Map([[Ze.ARROW_UP,n=>{n.preventDefault(),T("plus",n)}],[Ze.ARROW_DOWN,n=>{n.preventDefault(),T("minus",n)}]]));jt(()=>e.modelValue,n=>{n!==L.value&&(z.value=V(n),_(n))});const ie=()=>{var n;return O(ye,null,[(n=r.suffix)==null?void 0:n.call(r),O("div",{class:`${u}-step`},[O("button",{class:[`${u}-step-button`,{[`${u}-step-button-disabled`]:h.value||C.value}],type:"button",tabindex:"-1",disabled:h.value||C.value,onMousedown:i=>E(i,"plus",!0),onMouseup:v,onMouseleave:v},[O(Qt,null,null)]),O("button",{class:[`${u}-step-button`,{[`${u}-step-button-disabled`]:h.value||W.value}],type:"button",tabindex:"-1",disabled:h.value||W.value,onMousedown:i=>E(i,"minus",!0),onMouseup:v,onMouseleave:v},[O(Ot,null,null)])])])},ae=g(()=>[u,`${u}-mode-${e.mode}`,`${u}-size-${S.value}`]),le=()=>O(Qe,{size:S.value,tabindex:"-1",class:`${u}-step-button`,disabled:h.value||W.value,onMousedown:n=>E(n,"minus",!0),onMouseup:v,onMouseleave:v},{icon:()=>O(pr,null,null)}),he=()=>O(Qe,{size:S.value,tabindex:"-1",class:`${u}-step-button`,disabled:h.value||C.value,onMousedown:n=>E(n,"plus",!0),onMouseup:v,onMouseleave:v},{icon:()=>O(ar,null,null)});return{inputRef:f,render:()=>{const n=e.mode==="embed"?{prepend:r.prepend,prefix:r.prefix,suffix:e.hideButton?r.suffix:ie,append:r.append}:{prepend:le,prefix:r.prefix,suffix:r.suffix,append:he};return O(Vt,{key:`__arco__${e.mode}`,ref:f,class:ae.value,type:"text",allowClear:e.allowClear,size:S.value,modelValue:z.value,placeholder:e.placeholder,disabled:h.value,error:e.error,inputAttrs:{role:"spinbutton","aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":z.value},onInput:q,onFocus:pe,onBlur:$e,onClear:me,onChange:te,onKeydown:ke},n)}}},methods:{focus(){var e;(e=this.inputRef)==null||e.focus()},blur(){var e;(e=this.inputRef)==null||e.blur()}},render(){return this.render()}});const yo=Object.assign(ze,{install:(e,t)=>{dt(e,t);const r=ft(t);e.component(r+ze.name,ze)}}),hr=G({name:"Message",components:{AIconHover:Dt,IconInfoCircleFill:Ht,IconCheckCircleFill:At,IconExclamationCircleFill:Ue,IconCloseCircleFill:Rt,IconClose:xt,IconLoading:Ut},props:{type:{type:String,default:"info"},closable:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!0},duration:{type:Number,default:3e3},resetOnUpdate:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){const r=U("message");let o=0;const a=()=>{t("close")};return De(()=>{e.duration>0&&(o=window.setTimeout(a,e.duration))}),Nt(()=>{e.resetOnUpdate&&(o&&(window.clearTimeout(o),o=0),e.duration>0&&(o=window.setTimeout(a,e.duration)))}),Ae(()=>{o&&window.clearTimeout(o)}),{prefixCls:r,handleClose:a}}});function gr(e,t,r,o,a,s){const u=I("icon-info-circle-fill"),f=I("icon-check-circle-fill"),p=I("icon-exclamation-circle-fill"),h=I("icon-close-circle-fill"),k=I("icon-loading"),S=I("icon-close"),R=I("a-icon-hover");return m(),$("li",{role:"alert",class:y([e.prefixCls,`${e.prefixCls}-${e.type}`,{[`${e.prefixCls}-closable`]:e.closable}])},[e.showIcon?(m(),$("span",{key:0,class:y(`${e.prefixCls}-icon`)},[Z(e.$slots,"icon",{},()=>[e.type==="info"?(m(),D(u,{key:0})):e.type==="success"?(m(),D(f,{key:1})):e.type==="warning"?(m(),D(p,{key:2})):e.type==="error"?(m(),D(h,{key:3})):e.type==="loading"?(m(),D(k,{key:4})):J("v-if",!0)])],2)):J("v-if",!0),j("span",{class:y(`${e.prefixCls}-content`)},[Z(e.$slots,"default")],2),e.closable?(m(),$("span",{key:1,class:y(`${e.prefixCls}-close-btn`),onClick:t[0]||(t[0]=(...V)=>e.handleClose&&e.handleClose(...V))},[O(R,null,{default:ge(()=>[O(S)]),_:1})],2)):J("v-if",!0)],2)}var vr=Y(hr,[["render",gr]]);function yr(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Mt(e)}var wr=G({name:"MessageList",props:{messages:{type:Array,default:()=>[]},position:{type:String,default:"top"}},emits:["close","afterClose"],setup(e,t){const r=U("message-list"),{zIndex:o}=Lt("message",{runOnMounted:!0});return()=>{let a;return O(Bt,{class:[r,`${r}-${e.position}`],name:"fade-message",tag:"ul",style:{zIndex:o.value},onAfterLeave:()=>t.emit("afterClose")},yr(a=e.messages.map(s=>{const u={default:Ke(s.content),icon:Ke(s.icon)};return O(vr,{key:s.id,type:s.type,duration:s.duration,closable:s.closable,resetOnUpdate:s.resetOnUpdate,onClose:()=>t.emit("close",s.id)},u)}))?a:{default:()=>[a]})}}}),br=Object.defineProperty,$r=Object.defineProperties,kr=Object.getOwnPropertyDescriptors,tt=Object.getOwnPropertySymbols,Sr=Object.prototype.hasOwnProperty,Cr=Object.prototype.propertyIsEnumerable,rt=(e,t,r)=>t in e?br(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,we=(e,t)=>{for(var r in t||(t={}))Sr.call(t,r)&&rt(e,r,t[r]);if(tt)for(var r of tt(t))Cr.call(t,r)&&rt(e,r,t[r]);return e},wt=(e,t)=>$r(e,kr(t));class _r{constructor(t,r){this.messageCount=0,this.add=s=>{var u;this.messageCount++;const f=(u=s.id)!=null?u:`__arco_message_${this.messageCount}`;if(this.messageIds.has(f))return this.update(f,s);const p=It(we({id:f},s));return this.messages.value.push(p),this.messageIds.add(f),{close:()=>this.remove(f)}},this.update=(s,u)=>{for(let f=0;f<this.messages.value.length;f++)if(this.messages.value[f].id===s){const p=!ct(u.duration);Object.assign(this.messages.value[f],wt(we({},u),{id:s,resetOnUpdate:p}));break}return{close:()=>this.remove(s)}},this.remove=s=>{for(let u=0;u<this.messages.value.length;u++){const f=this.messages.value[u];if(f.id===s){Pt(f.onClose)&&f.onClose(s),this.messages.value.splice(u,1),this.messageIds.delete(s);break}}},this.clear=()=>{this.messages.value.splice(0)},this.destroy=()=>{this.messages.value.length===0&&this.container&&(Xe(null,this.container),document.body.removeChild(this.container),this.container=null,ne[this.position]=void 0)};const{position:o="top"}=t;this.container=zt("message"),this.messageIds=new Set,this.messages=re([]),this.position=o;const a=O(wr,{messages:this.messages.value,position:o,onClose:this.remove,onAfterClose:this.destroy});(r!=null?r:oe._context)&&(a.appContext=r!=null?r:oe._context),Xe(a,this.container),document.body.appendChild(this.container)}}const ne={},bt=[...Gt,"loading"],ve=bt.reduce((e,t)=>(e[t]=(r,o)=>{Et(r)&&(r={content:r});const a=we({type:t},r),{position:s="top"}=a;return ne[s]||(ne[s]=new _r(a,o)),ne[s].add(a)},e),{});ve.clear=e=>{var t;e?(t=ne[e])==null||t.clear():Object.values(ne).forEach(r=>r==null?void 0:r.clear())};const oe=wt(we({},ve),{install:e=>{const t={clear:ve.clear};for(const r of bt)t[r]=(o,a=e._context)=>ve[r](o,a);e.config.globalProperties.$message=t},_context:null});var Fr=Object.defineProperty,nt=Object.getOwnPropertySymbols,Lr=Object.prototype.hasOwnProperty,Er=Object.prototype.propertyIsEnumerable,ot=(e,t,r)=>t in e?Fr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Pr=(e,t)=>{for(var r in t||(t={}))Lr.call(t,r)&&ot(e,r,t[r]);if(nt)for(var r of nt(t))Er.call(t,r)&&ot(e,r,t[r]);return e};const zr={small:3,medium:4,large:8},Or=e=>{if(!!e)return Te(e)?{backgroundImage:`linear-gradient(to right, ${Object.keys(e).map(r=>`${e[r]} ${r}`).join(",")})`}:{backgroundColor:e}},jr=G({name:"ProgressLine",components:{IconExclamationCircleFill:Ue},props:{percent:{type:Number,default:0},animation:{type:Boolean,default:!1},size:{type:String,default:"medium"},strokeWidth:{type:Number,default:4},width:{type:[Number,String],default:"100%"},color:{type:[String,Object],default:void 0},trackColor:String,formatText:{type:Function,default:void 0},status:{type:String},showText:Boolean},setup(e){const t=U("progress-line"),r=g(()=>e.strokeWidth!==4?e.strokeWidth:zr[e.size]),o=g(()=>`${se.times(e.percent,100)}%`),a=g(()=>({width:e.width,height:`${r.value}px`,backgroundColor:e.trackColor})),s=g(()=>Pr({width:`${e.percent*100}%`},Or(e.color)));return{prefixCls:t,style:a,barStyle:s,text:o}}}),Nr=["aria-valuenow"];function Br(e,t,r,o,a,s){const u=I("icon-exclamation-circle-fill");return m(),$("div",{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.percent,class:y(`${e.prefixCls}-wrapper`)},[j("div",{class:y(e.prefixCls),style:A(e.style)},[j("div",{class:y(`${e.prefixCls}-bar-buffer`)},null,2),j("div",{class:y([`${e.prefixCls}-bar`]),style:A(e.barStyle)},null,6)],6),e.showText?(m(),$("div",{key:0,class:y(`${e.prefixCls}-text`)},[Z(e.$slots,"text",{percent:e.percent},()=>[Re(xe(e.text)+" ",1),e.status==="danger"?(m(),D(u,{key:0})):J("v-if",!0)])],2)):J("v-if",!0)],10,Nr)}var Mr=Y(jr,[["render",Br]]);const Ir=G({name:"IconExclamation",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},spin:Boolean},setup(e){const t=U("icon"),r=g(()=>[t,`${t}-exclamation`,{[`${t}-spin`]:e.spin}]),o=g(()=>{if(e.size)return{fontSize:N(e.size)?`${e.size}px`:e.size}});return{cls:r,sizeStyle:o}}}),Wr=["stroke-width","stroke-linecap","stroke-linejoin"],Tr=j("path",{d:"M23 9h2v21h-2z"},null,-1),Dr=j("path",{fill:"currentColor",stroke:"none",d:"M23 9h2v21h-2z"},null,-1),Ar=j("path",{d:"M23 37h2v2h-2z"},null,-1),Rr=j("path",{fill:"currentColor",stroke:"none",d:"M23 37h2v2h-2z"},null,-1),xr=[Tr,Dr,Ar,Rr];function Ur(e,t,r,o,a,s){return m(),$("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:y(e.cls),style:A(e.sizeStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},xr,14,Wr)}var Oe=Y(Ir,[["render",Ur]]);const Gr=Object.assign(Oe,{install:(e,t)=>{var r;const o=(r=t==null?void 0:t.iconPrefix)!=null?r:"";e.component(o+Oe.name,Oe)}}),Vr=G({name:"IconCheck",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},spin:Boolean},setup(e){const t=U("icon"),r=g(()=>[t,`${t}-check`,{[`${t}-spin`]:e.spin}]),o=g(()=>{if(e.size)return{fontSize:N(e.size)?`${e.size}px`:e.size}});return{cls:r,sizeStyle:o}}}),Hr=["stroke-width","stroke-linecap","stroke-linejoin"],qr=j("path",{d:"M41.678 11.05 19.05 33.678 6.322 20.95"},null,-1),Kr=[qr];function Yr(e,t,r,o,a,s){return m(),$("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:y(e.cls),style:A(e.sizeStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},Kr,14,Hr)}var je=Y(Vr,[["render",Yr]]);const Jr=Object.assign(je,{install:(e,t)=>{var r;const o=(r=t==null?void 0:t.iconPrefix)!=null?r:"";e.component(o+je.name,je)}});let st=0;const Xr={mini:16,small:48,medium:64,large:80},Zr={mini:4,small:3,medium:4,large:4},Qr=G({name:"ProgressCircle",components:{IconExclamation:Gr,IconCheck:Jr},props:{percent:{type:Number,default:0},type:{type:String},size:{type:String,default:"medium"},strokeWidth:{type:Number},width:{type:Number,default:void 0},color:{type:[String,Object],default:void 0},trackColor:String,status:{type:String,default:void 0},showText:{type:Boolean,default:!0},pathStrokeWidth:{type:Number}},setup(e){const t=U("progress-circle"),r=Te(e.color),o=g(()=>{var S;return(S=e.width)!=null?S:Xr[e.size]}),a=g(()=>{var S;return(S=e.strokeWidth)!=null?S:e.size==="mini"?o.value/2:Zr[e.size]}),s=g(()=>{var S;return(S=e.pathStrokeWidth)!=null?S:e.size==="mini"?a.value:Math.max(2,a.value-2)}),u=g(()=>(o.value-a.value)/2),f=g(()=>Math.PI*2*u.value),p=g(()=>o.value/2),h=g(()=>(st+=1,`${t}-linear-gradient-${st}`)),k=g(()=>`${se.times(e.percent,100)}%`);return{prefixCls:t,isLinearGradient:r,radius:u,text:k,perimeter:f,center:p,mergedWidth:o,mergedStrokeWidth:a,mergedPathStrokeWidth:s,linearGradientId:h}}}),en=["aria-valuenow"],tn=["viewBox"],rn={key:0},nn=["id"],on=["offset","stop-color"],sn=["cx","cy","r","stroke-width"],an=["cx","cy","r","stroke-width"];function ln(e,t,r,o,a,s){const u=I("icon-check"),f=I("icon-exclamation");return m(),$("div",{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.percent,class:y(`${e.prefixCls}-wrapper`),style:A({width:`${e.mergedWidth}px`,height:`${e.mergedWidth}px`})},[e.type==="circle"&&e.size==="mini"&&e.status==="success"?(m(),D(u,{key:0,style:A({fontSize:e.mergedWidth-2,color:e.color})},null,8,["style"])):(m(),$("svg",{key:1,viewBox:`0 0 ${e.mergedWidth} ${e.mergedWidth}`,class:y(`${e.prefixCls}-svg`)},[e.isLinearGradient?(m(),$("defs",rn,[j("linearGradient",{id:e.linearGradientId,x1:"0",y1:"1",x2:"0",y2:"0"},[(m(!0),$(ye,null,mt(Object.keys(e.color),p=>(m(),$("stop",{key:p,offset:p,"stop-color":e.color[p]},null,8,on))),128))],8,nn)])):J("v-if",!0),j("circle",{class:y(`${e.prefixCls}-bg`),fill:"none",cx:e.center,cy:e.center,r:e.radius,"stroke-width":e.mergedPathStrokeWidth,style:A({stroke:e.trackColor})},null,14,sn),j("circle",{class:y(`${e.prefixCls}-bar`),fill:"none",cx:e.center,cy:e.center,r:e.radius,"stroke-width":e.mergedStrokeWidth,style:A({stroke:e.isLinearGradient?`url(#${e.linearGradientId})`:e.color,strokeDasharray:e.perimeter,strokeDashoffset:(e.percent>=1?0:1-e.percent)*e.perimeter})},null,14,an)],10,tn)),e.showText&&e.size!=="mini"?(m(),$("div",{key:2,class:y(`${e.prefixCls}-text`)},[Z(e.$slots,"text",{percent:e.percent},()=>[e.status==="danger"?(m(),D(f,{key:0})):e.status==="success"?(m(),D(u,{key:1})):(m(),$(ye,{key:2},[Re(xe(e.text),1)],2112))])],2)):J("v-if",!0)],14,en)}var un=Y(Qr,[["render",ln]]);const cn=G({name:"ProgressSteps",components:{IconExclamationCircleFill:Ue},props:{steps:{type:Number,default:0},percent:{type:Number,default:0},size:{type:String},color:{type:[String,Object],default:void 0},trackColor:String,strokeWidth:{type:Number},status:{type:String,default:void 0},showText:{type:Boolean,default:!0}},setup(e){const t=U("progress-steps"),r=g(()=>{var s;return((s=e.strokeWidth)!=null?s:e.size==="small")?8:4}),o=g(()=>[...Array(e.steps)].map((s,u)=>e.percent>0&&e.percent>=1/e.steps*u)),a=g(()=>`${se.times(e.percent,100)}%`);return{prefixCls:t,stepList:o,mergedStrokeWidth:r,text:a}}}),dn=["aria-valuenow"];function fn(e,t,r,o,a,s){const u=I("icon-exclamation-circle-fill");return m(),$("div",{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.percent,class:y(`${e.prefixCls}-wrapper`)},[j("div",{class:y(e.prefixCls),style:A({height:`${e.mergedStrokeWidth}px`})},[(m(!0),$(ye,null,mt(e.stepList,(f,p)=>(m(),$("div",{key:p,class:y([`${e.prefixCls}-item`,{[`${e.prefixCls}-item-active`]:f}]),style:A({backgroundColor:f?e.color:e.trackColor})},null,6))),128))],6),e.showText?(m(),$("div",{key:0,class:y(`${e.prefixCls}-text`)},[Z(e.$slots,"text",{percent:e.percent},()=>[Re(xe(e.text)+" ",1),e.status==="danger"?(m(),D(u,{key:0})):J("v-if",!0)])],2)):J("v-if",!0)],10,dn)}var pn=Y(cn,[["render",fn]]);const mn=G({name:"Progress",components:{ProgressLine:Mr,ProgressCircle:un,ProgressSteps:pn},props:{type:{type:String,default:"line"},size:{type:String},percent:{type:Number,default:0},steps:{type:Number,default:0},animation:{type:Boolean,default:!1},strokeWidth:{type:Number},width:{type:[Number,String]},color:{type:[String,Object]},trackColor:String,bufferColor:{type:[String,Object]},showText:{type:Boolean,default:!0},status:{type:String}},setup(e){const t=U("progress"),{size:r}=pt(e),o=g(()=>e.steps>0?"steps":e.type),a=g(()=>e.status||(e.percent>=1?"success":"normal")),{mergedSize:s}=ht(r);return{cls:g(()=>[t,`${t}-type-${o.value}`,`${t}-size-${s.value}`,`${t}-status-${a.value}`]),computedStatus:a,mergedSize:s}}});function hn(e,t,r,o,a,s){const u=I("progress-steps"),f=I("progress-line"),p=I("progress-circle");return m(),$("div",{class:y(e.cls)},[e.steps>0?(m(),D(u,{key:0,"stroke-width":e.strokeWidth,percent:e.percent,color:e.color,"track-color":e.trackColor,width:e.width,steps:e.steps,size:e.mergedSize,"show-text":e.showText},Ce({_:2},[e.$slots.text?{name:"text",fn:ge(h=>[Z(e.$slots,"text",_e(Fe(h)))])}:void 0]),1032,["stroke-width","percent","color","track-color","width","steps","size","show-text"])):e.type==="line"&&e.mergedSize!=="mini"?(m(),D(f,{key:1,"stroke-width":e.strokeWidth,animation:e.animation,percent:e.percent,color:e.color,"track-color":e.trackColor,size:e.mergedSize,"buffer-color":e.bufferColor,width:e.width,"show-text":e.showText,status:e.computedStatus},Ce({_:2},[e.$slots.text?{name:"text",fn:ge(h=>[Z(e.$slots,"text",_e(Fe(h)))])}:void 0]),1032,["stroke-width","animation","percent","color","track-color","size","buffer-color","width","show-text","status"])):(m(),D(p,{key:2,type:e.type,"stroke-width":e.type==="line"?e.strokeWidth||4:e.strokeWidth,"path-stroke-width":e.type==="line"?e.strokeWidth||4:e.strokeWidth,width:e.width,percent:e.percent,color:e.color,"track-color":e.trackColor,size:e.mergedSize,"show-text":e.showText,status:e.computedStatus},Ce({_:2},[e.$slots.text?{name:"text",fn:ge(h=>[Z(e.$slots,"text",_e(Fe(h)))])}:void 0]),1032,["type","stroke-width","path-stroke-width","width","percent","color","track-color","size","show-text","status"]))],2)}var Ne=Y(mn,[["render",hn]]);const wo=Object.assign(Ne,{install:(e,t)=>{dt(e,t);const r=ft(t);e.component(r+Ne.name,Ne)}});var $t=(e=>(e[e.mp4=0]="mp4",e[e.avi=1]="avi",e[e.webm=2]="webm",e[e.mpeg=3]="mpeg",e[e.flv=4]="flv",e))($t||{}),kt=(e=>(e[e.jpg=0]="jpg",e[e.jpeg=1]="jpeg",e[e.png=2]="png",e[e.gif=3]="gif",e))(kt||{});function gn(e){let t=e;if(e.file&&(t=e==null?void 0:e.file),!e)throw new Error("\u6CA1\u6709\u627E\u5230\u6587\u4EF6\uFF01");const r="new_file"+vn(t.name);return new File([t],r,{type:t.type})}function vn(e){return e.substring(e.lastIndexOf("."))}function yn(e,t){if(!e)return"";let r="image";return $t[t]!==void 0?r="video/":kt[t]!==void 0?r="image/":console.log("\u97F3\u9891\u5904\u7406"),URL.createObjectURL(new Blob([e],{type:`${r}${t}`}))}function bo(e){return new Promise((t,r)=>{try{const o=gn(e),a=URL.createObjectURL(o),s=document.createElement("video");s.src=a;const u=`${Date.now()}${Math.random()}`;s.onloadedmetadata=function(){URL.revokeObjectURL(a),t({file:o,url:a,id:u,el:s,width:s.videoWidth,height:s.videoHeight,duration:Math.round(s.duration)})}}catch(o){r(o)}})}var wn={exports:{}};(function(e){var t=function(r){var o=Object.prototype,a=o.hasOwnProperty,s,u=typeof Symbol=="function"?Symbol:{},f=u.iterator||"@@iterator",p=u.asyncIterator||"@@asyncIterator",h=u.toStringTag||"@@toStringTag";function k(l,n,i){return Object.defineProperty(l,n,{value:i,enumerable:!0,configurable:!0,writable:!0}),l[n]}try{k({},"")}catch{k=function(n,i,c){return n[i]=c}}function S(l,n,i,c){var d=n&&n.prototype instanceof H?n:H,b=Object.create(d.prototype),P=new ae(c||[]);return b._invoke=$e(l,i,P),b}r.wrap=S;function R(l,n,i){try{return{type:"normal",arg:l.call(n,i)}}catch(c){return{type:"throw",arg:c}}}var V="suspendedStart",z="suspendedYield",L="executing",W="completed",C={};function H(){}function v(){}function w(){}var _={};k(_,f,function(){return this});var T=Object.getPrototypeOf,E=T&&T(T(le([])));E&&E!==o&&a.call(E,f)&&(_=E);var q=w.prototype=H.prototype=Object.create(_);v.prototype=w,k(q,"constructor",w),k(w,"constructor",v),v.displayName=k(w,h,"GeneratorFunction");function pe(l){["next","throw","return"].forEach(function(n){k(l,n,function(i){return this._invoke(n,i)})})}r.isGeneratorFunction=function(l){var n=typeof l=="function"&&l.constructor;return n?n===v||(n.displayName||n.name)==="GeneratorFunction":!1},r.mark=function(l){return Object.setPrototypeOf?Object.setPrototypeOf(l,w):(l.__proto__=w,k(l,h,"GeneratorFunction")),l.prototype=Object.create(q),l},r.awrap=function(l){return{__await:l}};function te(l,n){function i(b,P,B,x){var M=R(l[b],l,P);if(M.type==="throw")x(M.arg);else{var Se=M.arg,ue=Se.value;return ue&&typeof ue=="object"&&a.call(ue,"__await")?n.resolve(ue.__await).then(function(Q){i("next",Q,B,x)},function(Q){i("throw",Q,B,x)}):n.resolve(ue).then(function(Q){Se.value=Q,B(Se)},function(Q){return i("throw",Q,B,x)})}}var c;function d(b,P){function B(){return new n(function(x,M){i(b,P,x,M)})}return c=c?c.then(B,B):B()}this._invoke=d}pe(te.prototype),k(te.prototype,p,function(){return this}),r.AsyncIterator=te,r.async=function(l,n,i,c,d){d===void 0&&(d=Promise);var b=new te(S(l,n,i,c),d);return r.isGeneratorFunction(n)?b:b.next().then(function(P){return P.done?P.value:b.next()})};function $e(l,n,i){var c=V;return function(b,P){if(c===L)throw new Error("Generator is already running");if(c===W){if(b==="throw")throw P;return he()}for(i.method=b,i.arg=P;;){var B=i.delegate;if(B){var x=me(B,i);if(x){if(x===C)continue;return x}}if(i.method==="next")i.sent=i._sent=i.arg;else if(i.method==="throw"){if(c===V)throw c=W,i.arg;i.dispatchException(i.arg)}else i.method==="return"&&i.abrupt("return",i.arg);c=L;var M=R(l,n,i);if(M.type==="normal"){if(c=i.done?W:z,M.arg===C)continue;return{value:M.arg,done:i.done}}else M.type==="throw"&&(c=W,i.method="throw",i.arg=M.arg)}}}function me(l,n){var i=l.iterator[n.method];if(i===s){if(n.delegate=null,n.method==="throw"){if(l.iterator.return&&(n.method="return",n.arg=s,me(l,n),n.method==="throw"))return C;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return C}var c=R(i,l.iterator,n.arg);if(c.type==="throw")return n.method="throw",n.arg=c.arg,n.delegate=null,C;var d=c.arg;if(!d)return n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,C;if(d.done)n[l.resultName]=d.value,n.next=l.nextLoc,n.method!=="return"&&(n.method="next",n.arg=s);else return d;return n.delegate=null,C}pe(q),k(q,h,"Generator"),k(q,f,function(){return this}),k(q,"toString",function(){return"[object Generator]"});function ke(l){var n={tryLoc:l[0]};1 in l&&(n.catchLoc=l[1]),2 in l&&(n.finallyLoc=l[2],n.afterLoc=l[3]),this.tryEntries.push(n)}function ie(l){var n=l.completion||{};n.type="normal",delete n.arg,l.completion=n}function ae(l){this.tryEntries=[{tryLoc:"root"}],l.forEach(ke,this),this.reset(!0)}r.keys=function(l){var n=[];for(var i in l)n.push(i);return n.reverse(),function c(){for(;n.length;){var d=n.pop();if(d in l)return c.value=d,c.done=!1,c}return c.done=!0,c}};function le(l){if(l){var n=l[f];if(n)return n.call(l);if(typeof l.next=="function")return l;if(!isNaN(l.length)){var i=-1,c=function d(){for(;++i<l.length;)if(a.call(l,i))return d.value=l[i],d.done=!1,d;return d.value=s,d.done=!0,d};return c.next=c}}return{next:he}}r.values=le;function he(){return{value:s,done:!0}}return ae.prototype={constructor:ae,reset:function(l){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(ie),!l)for(var n in this)n.charAt(0)==="t"&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=s)},stop:function(){this.done=!0;var l=this.tryEntries[0],n=l.completion;if(n.type==="throw")throw n.arg;return this.rval},dispatchException:function(l){if(this.done)throw l;var n=this;function i(x,M){return b.type="throw",b.arg=l,n.next=x,M&&(n.method="next",n.arg=s),!!M}for(var c=this.tryEntries.length-1;c>=0;--c){var d=this.tryEntries[c],b=d.completion;if(d.tryLoc==="root")return i("end");if(d.tryLoc<=this.prev){var P=a.call(d,"catchLoc"),B=a.call(d,"finallyLoc");if(P&&B){if(this.prev<d.catchLoc)return i(d.catchLoc,!0);if(this.prev<d.finallyLoc)return i(d.finallyLoc)}else if(P){if(this.prev<d.catchLoc)return i(d.catchLoc,!0)}else if(B){if(this.prev<d.finallyLoc)return i(d.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(l,n){for(var i=this.tryEntries.length-1;i>=0;--i){var c=this.tryEntries[i];if(c.tryLoc<=this.prev&&a.call(c,"finallyLoc")&&this.prev<c.finallyLoc){var d=c;break}}d&&(l==="break"||l==="continue")&&d.tryLoc<=n&&n<=d.finallyLoc&&(d=null);var b=d?d.completion:{};return b.type=l,b.arg=n,d?(this.method="next",this.next=d.finallyLoc,C):this.complete(b)},complete:function(l,n){if(l.type==="throw")throw l.arg;return l.type==="break"||l.type==="continue"?this.next=l.arg:l.type==="return"?(this.rval=this.arg=l.arg,this.method="return",this.next="end"):l.type==="normal"&&n&&(this.next=n),C},finish:function(l){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.finallyLoc===l)return this.complete(i.completion,i.afterLoc),ie(i),C}},catch:function(l){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc===l){var c=i.completion;if(c.type==="throw"){var d=c.arg;ie(i)}return d}}throw new Error("illegal catch attempt")},delegateYield:function(l,n,i){return this.delegate={iterator:le(l),resultName:n,nextLoc:i},this.method==="next"&&(this.arg=s),C}},r}(e.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})(wn);var bn={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}};let He=!1,St=()=>{};const $n=e=>{He=e},kn=e=>{St=e},Sn=(e,t)=>{St({type:e,message:t}),He&&console.log(`[${e}] ${t}`)};var Ct={logging:He,setLogging:$n,setCustomLogger:kn,log:Sn};let ce=0,Be=0;const it=e=>{const[t,r,o]=e.split(":");return parseFloat(t)*60*60+parseFloat(r)*60+parseFloat(o)};var Cn=(e,t)=>{if(typeof e=="string")if(e.startsWith("  Duration")){const r=e.split(", ")[0].split(": ")[1],o=it(r);t({duration:o,ratio:Be}),(ce===0||ce>o)&&(ce=o)}else if(e.startsWith("frame")||e.startsWith("size")){const r=e.split("time=")[1].split(" ")[0],o=it(r);Be=o/ce,t({ratio:Be,time:o})}else e.startsWith("video:")&&(t({ratio:1}),ce=0)},_n=(e,t)=>{const r=e._malloc(t.length*Uint32Array.BYTES_PER_ELEMENT);return t.forEach((o,a)=>{const s=e._malloc(o.length+1);e.writeAsciiToMemory(o,s),e.setValue(r+Uint32Array.BYTES_PER_ELEMENT*a,s,"i32")}),[t.length,r]},qe={exports:{}};(function(e,t){(function(r,o){e.exports=o()})(qt,function(){function r(){var o=arguments.length;if(o===0)throw new Error("resolveUrl requires at least one argument; got none.");var a=document.createElement("base");if(a.href=arguments[0],o===1)return a.href;var s=document.getElementsByTagName("head")[0];s.insertBefore(a,s.firstChild);for(var u=document.createElement("a"),f,p=1;p<o;p++)u.href=arguments[p],f=u.href,a.href=f;return s.removeChild(a),f}return r})})(qe);const Fn="@ffmpeg/ffmpeg",Ln="0.10.1",En="FFmpeg WebAssembly version",Pn="src/index.js",zn="src/index.d.ts",On={example:"examples"},jn={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js",prepublishOnly:"npm run build",lint:"eslint src",wait:"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:node":"node --experimental-wasm-threads --experimental-wasm-bulk-memory node_modules/.bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html"},Nn={"./src/node/index.js":"./src/browser/index.js"},Bn={type:"git",url:"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},Mn=["ffmpeg","WebAssembly","video"],In="Jerome Wu <jeromewus@gmail.com>",Wn="MIT",Tn={url:"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},Dn={node:">=12.16.1"},An="https://github.com/ffmpegwasm/ffmpeg.wasm#readme",Rn={"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},xn={"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.10.0","@types/emscripten":"^1.39.4","babel-loader":"^8.1.0",chai:"^4.2.0",cors:"^2.8.5",eslint:"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1",express:"^4.17.1",mocha:"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.3.0",webpack:"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"};var _t={name:Fn,version:Ln,description:En,main:Pn,types:zn,directories:On,scripts:jn,browser:Nn,repository:Bn,keywords:Mn,author:In,license:Wn,bugs:Tn,engines:Dn,homepage:An,dependencies:Rn,devDependencies:xn};const{devDependencies:Un}=_t;var Gn={corePath:`https://unpkg.com/@ffmpeg/core@${Un["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`};const Vn=qe.exports,{log:de}=Ct,Me=async(e,t)=>{de("info",`fetch ${e}`);const r=await(await fetch(e)).arrayBuffer();de("info",`${e} file size = ${r.byteLength} bytes`);const o=new Blob([r],{type:t}),a=URL.createObjectURL(o);return de("info",`${e} blob URL = ${a}`),a};var Hn=async({corePath:e})=>{if(typeof e!="string")throw Error("corePath should be a string!");const t=Vn(e),r=await Me(t,"application/javascript"),o=await Me(t.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),a=await Me(t.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return typeof createFFmpegCore=="undefined"?new Promise(s=>{const u=document.createElement("script"),f=()=>{u.removeEventListener("load",f),de("info","ffmpeg-core.js script loaded"),s({createFFmpegCore,corePath:r,wasmPath:o,workerPath:a})};u.src=r,u.type="text/javascript",u.addEventListener("load",f),document.getElementsByTagName("head")[0].appendChild(u)}):(de("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:r,wasmPath:o,workerPath:a}))};const qn=qe.exports,Kn=e=>new Promise((t,r)=>{const o=new FileReader;o.onload=()=>{t(o.result)},o.onerror=({target:{error:{code:a}}})=>{r(Error(`File could not be read! Code=${a}`))},o.readAsArrayBuffer(e)});var Yn=async e=>{let t=e;return typeof e=="undefined"?new Uint8Array:(typeof e=="string"?/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?t=atob(e.split(",")[1]).split("").map(r=>r.charCodeAt(0)):t=await(await fetch(qn(e))).arrayBuffer():(e instanceof File||e instanceof Blob)&&(t=await Kn(e)),new Uint8Array(t))};const Jn=Gn,Xn=Hn,Zn=Yn;var Ft={defaultOptions:Jn,getCreateFFmpegCore:Xn,fetchFile:Zn};const{defaultArgs:Qn,baseOptions:eo}=bn,{setLogging:at,setCustomLogger:lt,log:ee}=Ct,to=Cn,ro=_n,{defaultOptions:no,getCreateFFmpegCore:oo}=Ft,{version:so}=_t,Ie=Error("ffmpeg.wasm is not ready, make sure you have completed load().");var io=(e={})=>{const{log:t,logger:r,progress:o,...a}={...eo,...no,...e};let s=null,u=null,f=null,p=!1,h=o;const k=v=>{v==="FFMPEG_END"&&f!==null&&(f(),f=null,p=!1)},S=({type:v,message:w})=>{ee(v,w),to(w,h),k(w)},R=async()=>{if(ee("info","load ffmpeg-core"),s===null){ee("info","loading ffmpeg-core");const{createFFmpegCore:v,corePath:w,workerPath:_,wasmPath:T}=await oo(a);s=await v({mainScriptUrlOrBlob:w,printErr:E=>S({type:"fferr",message:E}),print:E=>S({type:"ffout",message:E}),locateFile:(E,q)=>{if(typeof window!="undefined"){if(typeof T!="undefined"&&E.endsWith("ffmpeg-core.wasm"))return T;if(typeof _!="undefined"&&E.endsWith("ffmpeg-core.worker.js"))return _}return q+E}}),u=s.cwrap("proxy_main","number",["number","number"]),ee("info","ffmpeg-core loaded")}else throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.")},V=()=>s!==null,z=(...v)=>{if(ee("info",`run ffmpeg command: ${v.join(" ")}`),s===null)throw Ie;if(p)throw Error("ffmpeg.wasm can only run one command at a time");return p=!0,new Promise(w=>{const _=[...Qn,...v].filter(T=>T.length!==0);f=w,u(...ro(s,_))})},L=(v,...w)=>{if(ee("info",`run FS.${v} ${w.map(_=>typeof _=="string"?_:`<${_.length} bytes binary file>`).join(" ")}`),s===null)throw Ie;{let _=null;try{_=s.FS[v](...w)}catch{throw Error(v==="readdir"?`ffmpeg.FS('readdir', '${w[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`:v==="readFile"?`ffmpeg.FS('readFile', '${w[0]}') error. Check if the path exists`:"Oops, something went wrong in FS operation.")}return _}},W=()=>{if(s===null)throw Ie;p=!1,s.exit(1),s=null,u=null,f=null},C=v=>{h=v},H=v=>{lt(v)};return at(t),lt(r),ee("info",`use ffmpeg.wasm v${so}`),{setProgress:C,setLogger:H,setLogging:at,load:R,isLoaded:V,run:z,exit:W,FS:L}};const ao=io,{fetchFile:lo}=Ft;var ut={createFFmpeg:ao,fetchFile:lo};let F=null;function uo(){if(!("SharedArrayBuffer"in window))throw oe.error("\u6D4F\u89C8\u5668\u4E0D\u652F\u6301 SharedArrayBuffer\uFF0C \u65E0\u6CD5\u4F7F\u7528\u89C6\u9891\u529F\u80FD\uFF01"),new Error("SharedArrayBuffer could not be used.")}function $o(){uo(),F||(F=ut.createFFmpeg({log:!0})),De(e),Ae(()=>{F=null});async function e(){F!=null&&F.isLoaded()||await(F==null?void 0:F.load())}function t(s){F&&F.setProgress(s)}async function r(s){try{F&&F.FS("writeFile",s.name,await ut.fetchFile(s))}catch{oe.error("\u5199\u5165\u6587\u4EF6\u5931\u8D25\uFF01\u8BF7\u91CD\u8BD5")}}function o(s){try{return F?F.FS("readFile",s).buffer:null}catch{oe.error("\u8BFB\u53D6\u6587\u4EF6\u5931\u8D25\uFF01\u8BF7\u91CD\u8BD5")}return null}async function a(s){const u={url:"",size:0};if(!F)return u;const{outputName:f,fileType:p}=s;try{await F.run(...co(s));const h=await o(`${f}.${p}`);return u.url=yn(h,p),u.size=(h==null?void 0:h.byteLength)||0,u}catch{oe.error("\u6587\u4EF6\u64CD\u4F5C\u5931\u8D25\uFF01\u8BF7\u91CD\u8BD5")}return u}return{ffmpeg:F,loadFFmpeg:e,setProgress:t,writeFile:r,readFile:o,ffmpegRun:a}}function co(e){const{filename:t,frameRate:r=25,rangeStart:o=0,rangeEnd:a,width:s=-1,height:u=-1,fileType:f,outputName:p="output",type:h}=e;return{image:`-ss ${o} -i ${t} -s ${s}x${u} -f image2 -frames 1 ${p}.${f}`,video:`-i ${t} -r ${r} -ss ${o} -to ${a} -vf scale=${s}:${u},fade=t=in:st=${o}:d=0.05 ${p}.${f}`}[h].split(/(?:\s+)/)}function ko(e,t){return Number(Number(e||0).toFixed(t))}export{yo as I,wo as P,$o as a,ar as b,Jr as c,ko as f,bo as g,gn as h,se as i,vo as u};
