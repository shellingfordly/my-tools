import{g as q,i as E,_ as Q,u as lt,m as He,b as ut,B as Re,s as Je,a as Xe,c as Ze}from"./index.be275d6f.js";import{I as ct,a as dt,M as pe}from"./index.9860aab2.js";import{I as ft}from"./index.5ceca9a8.js";import{d as H,c as y,o as $,a as P,n as L,e as x,f as _,t as Qe,r as he,y as $e,B as R,N as mt,F as ve,g as Z,b as te,C as _e,D as We,h as K,i as re,k as et,l as ke,w as Se,Y as Ce,a2 as Fe,u as pt,v as ht}from"./index.13efb4fa.js";import{I as vt}from"./index.0ecf0cf5.js";import{g as gt,K as xe}from"./index.7953a262.js";import{t as tt}from"./use-popup-manager.35457e0b.js";import{h as yt,b as wt}from"./handleFile.719ba7a4.js";import{c as bt}from"./index.612f7938.js";function Ie(e,r){return r===void 0&&(r=15),+parseFloat(Number(e).toPrecision(r))}function V(e){var r=e.toString().split(/[eE]/),n=(r[0].split(".")[1]||"").length-+(r[1]||0);return n>0?n:0}function ce(e){if(e.toString().indexOf("e")===-1)return Number(e.toString().replace(".",""));var r=V(e);return r>0?Ie(Number(e)*Math.pow(10,r)):Number(e)}function Be(e){nt&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&console.warn(e+" is beyond boundary when transfer to integer, the results may not be accurate")}function ge(e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=r[0],c=r.slice(1);return c.reduce(function(l,a){return e(l,a)},i)}}var Y=ge(function(e,r){var n=ce(e),i=ce(r),c=V(e)+V(r),l=n*i;return Be(l),l/Math.pow(10,c)}),$t=ge(function(e,r){var n=Math.pow(10,Math.max(V(e),V(r)));return(Y(e,n)+Y(r,n))/n}),kt=ge(function(e,r){var n=Math.pow(10,Math.max(V(e),V(r)));return(Y(e,n)-Y(r,n))/n}),rt=ge(function(e,r){var n=ce(e),i=ce(r);return Be(n),Be(i),Y(n/i,Ie(Math.pow(10,V(r)-V(e))))});function St(e,r){var n=Math.pow(10,r),i=rt(Math.round(Math.abs(Y(e,n))),n);return e<0&&i!==0&&(i=Y(i,-1)),i}var nt=!0;function Ct(e){e===void 0&&(e=!0),nt=e}var ne={strip:Ie,plus:$t,minus:kt,times:Y,divide:rt,round:St,digitLength:V,float2Fixed:ce,enableBoundaryChecking:Ct};const Ft=H({name:"IconMinus",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:r}){const n=q("icon"),i=y(()=>[n,`${n}-minus`,{[`${n}-spin`]:e.spin}]),c=y(()=>{const a={};return e.size&&(a.fontSize=E(e.size)?`${e.size}px`:e.size),e.rotate&&(a.transform=`rotate(${e.rotate}deg)`),a});return{cls:i,innerStyle:c,onClick:a=>{r("click",a)}}}}),Et=["stroke-width","stroke-linecap","stroke-linejoin"],Lt=_("path",{d:"M5 24h38"},null,-1),Nt=[Lt];function Pt(e,r,n,i,c,l){return $(),P("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:L(e.cls),style:x(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:r[0]||(r[0]=(...a)=>e.onClick&&e.onClick(...a))},Nt,14,Et)}var Ee=Q(Ft,[["render",Pt]]);const Ot=Object.assign(Ee,{install:(e,r)=>{var n;const i=(n=r==null?void 0:r.iconPrefix)!=null?n:"";e.component(i+Ee.name,Ee)}}),zt=150;ne.enableBoundaryChecking(!1);var Le=H({name:"InputNumber",props:{modelValue:Number,defaultValue:Number,mode:{type:String,default:"embed"},precision:Number,step:{type:Number,default:1},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},formatter:{type:Function},parser:{type:Function},placeholder:String,hideButton:{type:Boolean,default:!1},size:{type:String},allowClear:{type:Boolean,default:!1},modelEvent:{type:String,default:"change"},readOnly:{type:Boolean,default:!1}},emits:{"update:modelValue":e=>!0,change:(e,r)=>!0,focus:e=>!0,blur:e=>!0,clear:e=>!0,input:(e,r,n)=>!0},setup(e,{emit:r,slots:n}){var i;const{size:c,disabled:l}=Qe(e),a=q("input-number"),f=he(),{mergedSize:m,mergedDisabled:v,eventHandlers:A}=lt({size:c,disabled:l}),{mergedSize:g}=He(m),G=y(()=>{if(E(e.precision)){const t=`${e.step}`.split(".")[1],o=t&&t.length||0;return Math.max(o,e.precision)}}),W=t=>{var o,u;if(!E(t))return"";const d=G.value?t.toFixed(G.value):String(t);return(u=(o=e.formatter)==null?void 0:o.call(e,d))!=null?u:d},S=he(W((i=e.modelValue)!=null?i:e.defaultValue)),w=y(()=>{var t,o;if(!S.value)return;const u=Number((o=(t=e.parser)==null?void 0:t.call(e,S.value))!=null?o:S.value);return Number.isNaN(u)?void 0:u}),B=he(E(w.value)&&w.value<=e.min),O=he(E(w.value)&&w.value>=e.max);let C=0;const h=()=>{C&&(window.clearTimeout(C),C=0)},k=t=>{if(!ut(t))return E(e.min)&&t<e.min&&(t=e.min),E(e.max)&&t>e.max&&(t=e.max),E(G.value)?ne.round(t,G.value):t},b=t=>{let o=!1,u=!1;E(t)&&(t<=e.min&&(o=!0),t>=e.max&&(u=!0)),O.value!==u&&(O.value=u),B.value!==o&&(B.value=o)},I=()=>{const t=k(w.value),o=W(t);(t!==w.value||S.value!==o)&&(S.value=o),r("update:modelValue",t)};$e(()=>e.min,t=>{const o=E(w.value)&&w.value<=t;B.value!==o&&(B.value=o),E(w.value)&&w.value<t&&I()}),$e(()=>e.max,t=>{const o=E(w.value)&&w.value>=t;O.value!==o&&(O.value=o),E(w.value)&&w.value>t&&I()});const z=(t,o)=>{if(v.value||t==="plus"&&O.value||t==="minus"&&B.value)return;let u;E(w.value)?u=k(ne[t](w.value,e.step)):u=e.min===-1/0?0:e.min,S.value=W(u),b(u),r("update:modelValue",u),r("change",u,o)},D=(t,o,u=!1)=>{var d;t.preventDefault(),(d=f.value)==null||d.focus(),z(o,t),u&&(C=window.setTimeout(()=>t.target.dispatchEvent(t),zt))},U=(t,o)=>{var u,d,p,N;t=t.trim().replace(/ã€‚/g,"."),t=(d=(u=e.parser)==null?void 0:u.call(e,t))!=null?d:t,(E(Number(t))||/^(\.|-)$/.test(t))&&(S.value=(N=(p=e.formatter)==null?void 0:p.call(e,t))!=null?N:t,b(w.value),e.modelEvent==="input"&&r("update:modelValue",w.value),r("input",w.value,S.value,o))},de=t=>{r("focus",t)},ee=(t,o)=>{const u=k(w.value),d=W(u);(u!==w.value||S.value!==d)&&(S.value=d,b(u)),mt(()=>{E(e.modelValue)&&e.modelValue!==u&&(S.value=W(e.modelValue),b(e.modelValue))}),r("update:modelValue",u),r("change",u,o)},ye=t=>{r("blur",t)},fe=t=>{var o,u;S.value="",r("update:modelValue",void 0),r("change",void 0,t),(u=(o=A.value)==null?void 0:o.onChange)==null||u.call(o,t),r("clear",t)},we=gt(new Map([[xe.ARROW_UP,t=>{t.preventDefault(),!e.readOnly&&z("plus",t)}],[xe.ARROW_DOWN,t=>{t.preventDefault(),!e.readOnly&&z("minus",t)}]]));$e(()=>e.modelValue,t=>{t!==w.value&&(S.value=W(t),b(t))});const oe=()=>{var t;return e.readOnly?null:R(ve,null,[(t=n.suffix)==null?void 0:t.call(n),R("div",{class:`${a}-step`},[R("button",{class:[`${a}-step-button`,{[`${a}-step-button-disabled`]:v.value||O.value}],type:"button",tabindex:"-1",disabled:v.value||O.value,onMousedown:o=>D(o,"plus",!0),onMouseup:h,onMouseleave:h},[R(ct,null,null)]),R("button",{class:[`${a}-step-button`,{[`${a}-step-button-disabled`]:v.value||B.value}],type:"button",tabindex:"-1",disabled:v.value||B.value,onMousedown:o=>D(o,"minus",!0),onMouseup:h,onMouseleave:h},[R(ft,null,null)])])])},ie=y(()=>[a,`${a}-mode-${e.mode}`,`${a}-size-${g.value}`,{[`${a}-readonly`]:e.readOnly}]),ae=()=>R(Re,{size:g.value,tabindex:"-1",class:`${a}-step-button`,disabled:v.value||B.value,onMousedown:t=>D(t,"minus",!0),onMouseup:h,onMouseleave:h},{icon:()=>R(Ot,null,null)}),me=()=>R(Re,{size:g.value,tabindex:"-1",class:`${a}-step-button`,disabled:v.value||O.value,onMousedown:t=>D(t,"plus",!0),onMouseup:h,onMouseleave:h},{icon:()=>R(dt,null,null)});return{inputRef:f,render:()=>{const t=e.mode==="embed"?{prepend:n.prepend,prefix:n.prefix,suffix:e.hideButton?n.suffix:oe,append:n.append}:{prepend:ae,prefix:n.prefix,suffix:n.suffix,append:me};return R(vt,{key:`__arco__${e.mode}`,ref:f,class:ie.value,type:"text",allowClear:e.allowClear,size:g.value,modelValue:S.value,placeholder:e.placeholder,disabled:v.value,readonly:e.readOnly,error:e.error,inputAttrs:{role:"spinbutton","aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":S.value},onInput:U,onFocus:de,onBlur:ye,onClear:fe,onChange:ee,onKeydown:we},t)}}},methods:{focus(){var e;(e=this.inputRef)==null||e.focus()},blur(){var e;(e=this.inputRef)==null||e.blur()}},render(){return this.render()}});const kn=Object.assign(Le,{install:(e,r)=>{Je(e,r);const n=Xe(r);e.component(n+Le.name,Le)}});var jt=Object.defineProperty,Ae=Object.getOwnPropertySymbols,Mt=Object.prototype.hasOwnProperty,Bt=Object.prototype.propertyIsEnumerable,Ve=(e,r,n)=>r in e?jt(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,_t=(e,r)=>{for(var n in r||(r={}))Mt.call(r,n)&&Ve(e,n,r[n]);if(Ae)for(var n of Ae(r))Bt.call(r,n)&&Ve(e,n,r[n]);return e};const Wt={small:3,medium:4,large:8},It=e=>{if(!!e)return Ze(e)?{backgroundImage:`linear-gradient(to right, ${Object.keys(e).map(n=>`${e[n]} ${n}`).join(",")})`}:{backgroundColor:e}},Tt=H({name:"ProgressLine",components:{IconExclamationCircleFill:tt},props:{percent:{type:Number,default:0},animation:{type:Boolean,default:!1},size:{type:String,default:"medium"},strokeWidth:{type:Number,default:4},width:{type:[Number,String],default:"100%"},color:{type:[String,Object],default:void 0},trackColor:String,formatText:{type:Function,default:void 0},status:{type:String},showText:Boolean},setup(e){const r=q("progress-line"),n=y(()=>e.strokeWidth!==4?e.strokeWidth:Wt[e.size]),i=y(()=>`${ne.times(e.percent,100)}%`),c=y(()=>({width:e.width,height:`${n.value}px`,backgroundColor:e.trackColor})),l=y(()=>_t({width:`${e.percent*100}%`},It(e.color)));return{prefixCls:r,style:c,barStyle:l,text:i}}}),Dt=["aria-valuenow"];function Rt(e,r,n,i,c,l){const a=Z("icon-exclamation-circle-fill");return $(),P("div",{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.percent,class:L(`${e.prefixCls}-wrapper`)},[_("div",{class:L(e.prefixCls),style:x(e.style)},[_("div",{class:L(`${e.prefixCls}-bar-buffer`)},null,2),_("div",{class:L([`${e.prefixCls}-bar`]),style:x(e.barStyle)},null,6)],6),e.showText?($(),P("div",{key:0,class:L(`${e.prefixCls}-text`)},[te(e.$slots,"text",{percent:e.percent},()=>[_e(We(e.text)+" ",1),e.status==="danger"?($(),K(a,{key:0})):re("v-if",!0)])],2)):re("v-if",!0)],10,Dt)}var xt=Q(Tt,[["render",Rt]]);const At=H({name:"IconExclamation",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:r}){const n=q("icon"),i=y(()=>[n,`${n}-exclamation`,{[`${n}-spin`]:e.spin}]),c=y(()=>{const a={};return e.size&&(a.fontSize=E(e.size)?`${e.size}px`:e.size),e.rotate&&(a.transform=`rotate(${e.rotate}deg)`),a});return{cls:i,innerStyle:c,onClick:a=>{r("click",a)}}}}),Vt=["stroke-width","stroke-linecap","stroke-linejoin"],Gt=_("path",{d:"M23 9h2v21h-2z"},null,-1),Ut=_("path",{fill:"currentColor",stroke:"none",d:"M23 9h2v21h-2z"},null,-1),Kt=_("path",{d:"M23 37h2v2h-2z"},null,-1),Yt=_("path",{fill:"currentColor",stroke:"none",d:"M23 37h2v2h-2z"},null,-1),qt=[Gt,Ut,Kt,Yt];function Ht(e,r,n,i,c,l){return $(),P("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:L(e.cls),style:x(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:r[0]||(r[0]=(...a)=>e.onClick&&e.onClick(...a))},qt,14,Vt)}var Ne=Q(At,[["render",Ht]]);const Jt=Object.assign(Ne,{install:(e,r)=>{var n;const i=(n=r==null?void 0:r.iconPrefix)!=null?n:"";e.component(i+Ne.name,Ne)}}),Xt=H({name:"IconCheck",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:r}){const n=q("icon"),i=y(()=>[n,`${n}-check`,{[`${n}-spin`]:e.spin}]),c=y(()=>{const a={};return e.size&&(a.fontSize=E(e.size)?`${e.size}px`:e.size),e.rotate&&(a.transform=`rotate(${e.rotate}deg)`),a});return{cls:i,innerStyle:c,onClick:a=>{r("click",a)}}}}),Zt=["stroke-width","stroke-linecap","stroke-linejoin"],Qt=_("path",{d:"M41.678 11.05 19.05 33.678 6.322 20.95"},null,-1),er=[Qt];function tr(e,r,n,i,c,l){return $(),P("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:L(e.cls),style:x(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:r[0]||(r[0]=(...a)=>e.onClick&&e.onClick(...a))},er,14,Zt)}var Pe=Q(Xt,[["render",tr]]);const rr=Object.assign(Pe,{install:(e,r)=>{var n;const i=(n=r==null?void 0:r.iconPrefix)!=null?n:"";e.component(i+Pe.name,Pe)}});let Ge=0;const nr={mini:16,small:48,medium:64,large:80},or={mini:4,small:3,medium:4,large:4},ir=H({name:"ProgressCircle",components:{IconExclamation:Jt,IconCheck:rr},props:{percent:{type:Number,default:0},type:{type:String},size:{type:String,default:"medium"},strokeWidth:{type:Number},width:{type:Number,default:void 0},color:{type:[String,Object],default:void 0},trackColor:String,status:{type:String,default:void 0},showText:{type:Boolean,default:!0},pathStrokeWidth:{type:Number}},setup(e){const r=q("progress-circle"),n=Ze(e.color),i=y(()=>{var g;return(g=e.width)!=null?g:nr[e.size]}),c=y(()=>{var g;return(g=e.strokeWidth)!=null?g:e.size==="mini"?i.value/2:or[e.size]}),l=y(()=>{var g;return(g=e.pathStrokeWidth)!=null?g:e.size==="mini"?c.value:Math.max(2,c.value-2)}),a=y(()=>(i.value-c.value)/2),f=y(()=>Math.PI*2*a.value),m=y(()=>i.value/2),v=y(()=>(Ge+=1,`${r}-linear-gradient-${Ge}`)),A=y(()=>`${ne.times(e.percent,100)}%`);return{prefixCls:r,isLinearGradient:n,radius:a,text:A,perimeter:f,center:m,mergedWidth:i,mergedStrokeWidth:c,mergedPathStrokeWidth:l,linearGradientId:v}}}),ar=["aria-valuenow"],sr=["viewBox"],lr={key:0},ur=["id"],cr=["offset","stop-color"],dr=["cx","cy","r","stroke-width"],fr=["cx","cy","r","stroke-width"];function mr(e,r,n,i,c,l){const a=Z("icon-check"),f=Z("icon-exclamation");return $(),P("div",{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.percent,class:L(`${e.prefixCls}-wrapper`),style:x({width:`${e.mergedWidth}px`,height:`${e.mergedWidth}px`})},[e.type==="circle"&&e.size==="mini"&&e.status==="success"?($(),K(a,{key:0,style:x({fontSize:e.mergedWidth-2,color:e.color})},null,8,["style"])):($(),P("svg",{key:1,viewBox:`0 0 ${e.mergedWidth} ${e.mergedWidth}`,class:L(`${e.prefixCls}-svg`)},[e.isLinearGradient?($(),P("defs",lr,[_("linearGradient",{id:e.linearGradientId,x1:"0",y1:"1",x2:"0",y2:"0"},[($(!0),P(ve,null,et(Object.keys(e.color),m=>($(),P("stop",{key:m,offset:m,"stop-color":e.color[m]},null,8,cr))),128))],8,ur)])):re("v-if",!0),_("circle",{class:L(`${e.prefixCls}-bg`),fill:"none",cx:e.center,cy:e.center,r:e.radius,"stroke-width":e.mergedPathStrokeWidth,style:x({stroke:e.trackColor})},null,14,dr),_("circle",{class:L(`${e.prefixCls}-bar`),fill:"none",cx:e.center,cy:e.center,r:e.radius,"stroke-width":e.mergedStrokeWidth,style:x({stroke:e.isLinearGradient?`url(#${e.linearGradientId})`:e.color,strokeDasharray:e.perimeter,strokeDashoffset:(e.percent>=1?0:1-e.percent)*e.perimeter})},null,14,fr)],10,sr)),e.showText&&e.size!=="mini"?($(),P("div",{key:2,class:L(`${e.prefixCls}-text`)},[te(e.$slots,"text",{percent:e.percent},()=>[e.status==="danger"?($(),K(f,{key:0})):e.status==="success"?($(),K(a,{key:1})):($(),P(ve,{key:2},[_e(We(e.text),1)],2112))])],2)):re("v-if",!0)],14,ar)}var pr=Q(ir,[["render",mr]]);const hr=H({name:"ProgressSteps",components:{IconExclamationCircleFill:tt},props:{steps:{type:Number,default:0},percent:{type:Number,default:0},size:{type:String},color:{type:[String,Object],default:void 0},trackColor:String,strokeWidth:{type:Number},status:{type:String,default:void 0},showText:{type:Boolean,default:!0}},setup(e){const r=q("progress-steps"),n=y(()=>{var l;return((l=e.strokeWidth)!=null?l:e.size==="small")?8:4}),i=y(()=>[...Array(e.steps)].map((l,a)=>e.percent>0&&e.percent>1/e.steps*a)),c=y(()=>`${ne.times(e.percent,100)}%`);return{prefixCls:r,stepList:i,mergedStrokeWidth:n,text:c}}}),vr=["aria-valuenow"];function gr(e,r,n,i,c,l){const a=Z("icon-exclamation-circle-fill");return $(),P("div",{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.percent,class:L(`${e.prefixCls}-wrapper`)},[_("div",{class:L(e.prefixCls),style:x({height:`${e.mergedStrokeWidth}px`})},[($(!0),P(ve,null,et(e.stepList,(f,m)=>($(),P("div",{key:m,class:L([`${e.prefixCls}-item`,{[`${e.prefixCls}-item-active`]:f}]),style:x({backgroundColor:f?e.color:e.trackColor})},null,6))),128))],6),e.showText?($(),P("div",{key:0,class:L(`${e.prefixCls}-text`)},[te(e.$slots,"text",{percent:e.percent},()=>[_e(We(e.text)+" ",1),e.status==="danger"?($(),K(a,{key:0})):re("v-if",!0)])],2)):re("v-if",!0)],10,vr)}var yr=Q(hr,[["render",gr]]);const wr=H({name:"Progress",components:{ProgressLine:xt,ProgressCircle:pr,ProgressSteps:yr},props:{type:{type:String,default:"line"},size:{type:String},percent:{type:Number,default:0},steps:{type:Number,default:0},animation:{type:Boolean,default:!1},strokeWidth:{type:Number},width:{type:[Number,String]},color:{type:[String,Object]},trackColor:String,bufferColor:{type:[String,Object]},showText:{type:Boolean,default:!0},status:{type:String}},setup(e){const r=q("progress"),{size:n}=Qe(e),i=y(()=>e.steps>0?"steps":e.type),c=y(()=>e.status||(e.percent>=1?"success":"normal")),{mergedSize:l}=He(n);return{cls:y(()=>[r,`${r}-type-${i.value}`,`${r}-size-${l.value}`,`${r}-status-${c.value}`]),computedStatus:c,mergedSize:l}}});function br(e,r,n,i,c,l){const a=Z("progress-steps"),f=Z("progress-line"),m=Z("progress-circle");return $(),P("div",{class:L(e.cls)},[e.steps>0?($(),K(a,{key:0,"stroke-width":e.strokeWidth,percent:e.percent,color:e.color,"track-color":e.trackColor,width:e.width,steps:e.steps,size:e.mergedSize,"show-text":e.showText},ke({_:2},[e.$slots.text?{name:"text",fn:Se(v=>[te(e.$slots,"text",Ce(Fe(v)))])}:void 0]),1032,["stroke-width","percent","color","track-color","width","steps","size","show-text"])):e.type==="line"&&e.mergedSize!=="mini"?($(),K(f,{key:1,"stroke-width":e.strokeWidth,animation:e.animation,percent:e.percent,color:e.color,"track-color":e.trackColor,size:e.mergedSize,"buffer-color":e.bufferColor,width:e.width,"show-text":e.showText,status:e.computedStatus},ke({_:2},[e.$slots.text?{name:"text",fn:Se(v=>[te(e.$slots,"text",Ce(Fe(v)))])}:void 0]),1032,["stroke-width","animation","percent","color","track-color","size","buffer-color","width","show-text","status"])):($(),K(m,{key:2,type:e.type,"stroke-width":e.type==="line"?e.strokeWidth||4:e.strokeWidth,"path-stroke-width":e.type==="line"?e.strokeWidth||4:e.strokeWidth,width:e.width,percent:e.percent,color:e.color,"track-color":e.trackColor,size:e.mergedSize,"show-text":e.showText,status:e.computedStatus},ke({_:2},[e.$slots.text?{name:"text",fn:Se(v=>[te(e.$slots,"text",Ce(Fe(v)))])}:void 0]),1032,["type","stroke-width","path-stroke-width","width","percent","color","track-color","size","show-text","status"]))],2)}var Oe=Q(wr,[["render",br]]);const Sn=Object.assign(Oe,{install:(e,r)=>{Je(e,r);const n=Xe(r);e.component(n+Oe.name,Oe)}});function Cn(e){return new Promise((r,n)=>{try{const i=yt(e),c=URL.createObjectURL(i),l=document.createElement("video");l.src=c;const a=`${Date.now()}${Math.random()}`;l.onloadedmetadata=function(){URL.revokeObjectURL(c),r({file:i,url:c,id:a,el:l,width:l.videoWidth,height:l.videoHeight,duration:Math.round(l.duration)})}}catch(i){n(i)}})}var $r={exports:{}};(function(e){var r=function(n){var i=Object.prototype,c=i.hasOwnProperty,l=Object.defineProperty||function(s,t,o){s[t]=o.value},a,f=typeof Symbol=="function"?Symbol:{},m=f.iterator||"@@iterator",v=f.asyncIterator||"@@asyncIterator",A=f.toStringTag||"@@toStringTag";function g(s,t,o){return Object.defineProperty(s,t,{value:o,enumerable:!0,configurable:!0,writable:!0}),s[t]}try{g({},"")}catch{g=function(t,o,u){return t[o]=u}}function G(s,t,o,u){var d=t&&t.prototype instanceof h?t:h,p=Object.create(d.prototype),N=new ie(u||[]);return l(p,"_invoke",{value:ye(s,o,N)}),p}n.wrap=G;function W(s,t,o){try{return{type:"normal",arg:s.call(t,o)}}catch(u){return{type:"throw",arg:u}}}var S="suspendedStart",w="suspendedYield",B="executing",O="completed",C={};function h(){}function k(){}function b(){}var I={};g(I,m,function(){return this});var z=Object.getPrototypeOf,D=z&&z(z(ae([])));D&&D!==i&&c.call(D,m)&&(I=D);var U=b.prototype=h.prototype=Object.create(I);k.prototype=b,l(U,"constructor",{value:b,configurable:!0}),l(b,"constructor",{value:k,configurable:!0}),k.displayName=g(b,A,"GeneratorFunction");function de(s){["next","throw","return"].forEach(function(t){g(s,t,function(o){return this._invoke(t,o)})})}n.isGeneratorFunction=function(s){var t=typeof s=="function"&&s.constructor;return t?t===k||(t.displayName||t.name)==="GeneratorFunction":!1},n.mark=function(s){return Object.setPrototypeOf?Object.setPrototypeOf(s,b):(s.__proto__=b,g(s,A,"GeneratorFunction")),s.prototype=Object.create(U),s},n.awrap=function(s){return{__await:s}};function ee(s,t){function o(p,N,j,T){var M=W(s[p],s,N);if(M.type==="throw")T(M.arg);else{var be=M.arg,se=be.value;return se&&typeof se=="object"&&c.call(se,"__await")?t.resolve(se.__await).then(function(J){o("next",J,j,T)},function(J){o("throw",J,j,T)}):t.resolve(se).then(function(J){be.value=J,j(be)},function(J){return o("throw",J,j,T)})}}var u;function d(p,N){function j(){return new t(function(T,M){o(p,N,T,M)})}return u=u?u.then(j,j):j()}l(this,"_invoke",{value:d})}de(ee.prototype),g(ee.prototype,v,function(){return this}),n.AsyncIterator=ee,n.async=function(s,t,o,u,d){d===void 0&&(d=Promise);var p=new ee(G(s,t,o,u),d);return n.isGeneratorFunction(t)?p:p.next().then(function(N){return N.done?N.value:p.next()})};function ye(s,t,o){var u=S;return function(p,N){if(u===B)throw new Error("Generator is already running");if(u===O){if(p==="throw")throw N;return me()}for(o.method=p,o.arg=N;;){var j=o.delegate;if(j){var T=fe(j,o);if(T){if(T===C)continue;return T}}if(o.method==="next")o.sent=o._sent=o.arg;else if(o.method==="throw"){if(u===S)throw u=O,o.arg;o.dispatchException(o.arg)}else o.method==="return"&&o.abrupt("return",o.arg);u=B;var M=W(s,t,o);if(M.type==="normal"){if(u=o.done?O:w,M.arg===C)continue;return{value:M.arg,done:o.done}}else M.type==="throw"&&(u=O,o.method="throw",o.arg=M.arg)}}}function fe(s,t){var o=t.method,u=s.iterator[o];if(u===a)return t.delegate=null,o==="throw"&&s.iterator.return&&(t.method="return",t.arg=a,fe(s,t),t.method==="throw")||o!=="return"&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+o+"' method")),C;var d=W(u,s.iterator,t.arg);if(d.type==="throw")return t.method="throw",t.arg=d.arg,t.delegate=null,C;var p=d.arg;if(!p)return t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,C;if(p.done)t[s.resultName]=p.value,t.next=s.nextLoc,t.method!=="return"&&(t.method="next",t.arg=a);else return p;return t.delegate=null,C}de(U),g(U,A,"Generator"),g(U,m,function(){return this}),g(U,"toString",function(){return"[object Generator]"});function we(s){var t={tryLoc:s[0]};1 in s&&(t.catchLoc=s[1]),2 in s&&(t.finallyLoc=s[2],t.afterLoc=s[3]),this.tryEntries.push(t)}function oe(s){var t=s.completion||{};t.type="normal",delete t.arg,s.completion=t}function ie(s){this.tryEntries=[{tryLoc:"root"}],s.forEach(we,this),this.reset(!0)}n.keys=function(s){var t=Object(s),o=[];for(var u in t)o.push(u);return o.reverse(),function d(){for(;o.length;){var p=o.pop();if(p in t)return d.value=p,d.done=!1,d}return d.done=!0,d}};function ae(s){if(s){var t=s[m];if(t)return t.call(s);if(typeof s.next=="function")return s;if(!isNaN(s.length)){var o=-1,u=function d(){for(;++o<s.length;)if(c.call(s,o))return d.value=s[o],d.done=!1,d;return d.value=a,d.done=!0,d};return u.next=u}}return{next:me}}n.values=ae;function me(){return{value:a,done:!0}}return ie.prototype={constructor:ie,reset:function(s){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(oe),!s)for(var t in this)t.charAt(0)==="t"&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=a)},stop:function(){this.done=!0;var s=this.tryEntries[0],t=s.completion;if(t.type==="throw")throw t.arg;return this.rval},dispatchException:function(s){if(this.done)throw s;var t=this;function o(T,M){return p.type="throw",p.arg=s,t.next=T,M&&(t.method="next",t.arg=a),!!M}for(var u=this.tryEntries.length-1;u>=0;--u){var d=this.tryEntries[u],p=d.completion;if(d.tryLoc==="root")return o("end");if(d.tryLoc<=this.prev){var N=c.call(d,"catchLoc"),j=c.call(d,"finallyLoc");if(N&&j){if(this.prev<d.catchLoc)return o(d.catchLoc,!0);if(this.prev<d.finallyLoc)return o(d.finallyLoc)}else if(N){if(this.prev<d.catchLoc)return o(d.catchLoc,!0)}else if(j){if(this.prev<d.finallyLoc)return o(d.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(s,t){for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o];if(u.tryLoc<=this.prev&&c.call(u,"finallyLoc")&&this.prev<u.finallyLoc){var d=u;break}}d&&(s==="break"||s==="continue")&&d.tryLoc<=t&&t<=d.finallyLoc&&(d=null);var p=d?d.completion:{};return p.type=s,p.arg=t,d?(this.method="next",this.next=d.finallyLoc,C):this.complete(p)},complete:function(s,t){if(s.type==="throw")throw s.arg;return s.type==="break"||s.type==="continue"?this.next=s.arg:s.type==="return"?(this.rval=this.arg=s.arg,this.method="return",this.next="end"):s.type==="normal"&&t&&(this.next=t),C},finish:function(s){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.finallyLoc===s)return this.complete(o.completion,o.afterLoc),oe(o),C}},catch:function(s){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc===s){var u=o.completion;if(u.type==="throw"){var d=u.arg;oe(o)}return d}}throw new Error("illegal catch attempt")},delegateYield:function(s,t,o){return this.delegate={iterator:ae(s),resultName:t,nextLoc:o},this.method==="next"&&(this.arg=a),C}},n}(e.exports);try{regeneratorRuntime=r}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}})($r);var kr={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}};let Te=!1,ot=()=>{};const Sr=e=>{Te=e},Cr=e=>{ot=e},Fr=(e,r)=>{ot({type:e,message:r}),Te&&console.log(`[${e}] ${r}`)};var it={logging:Te,setLogging:Sr,setCustomLogger:Cr,log:Fr};let le=0,ze=0;const Ue=e=>{const[r,n,i]=e.split(":");return parseFloat(r)*60*60+parseFloat(n)*60+parseFloat(i)};var Er=(e,r)=>{if(typeof e=="string")if(e.startsWith("  Duration")){const n=e.split(", ")[0].split(": ")[1],i=Ue(n);r({duration:i,ratio:ze}),(le===0||le>i)&&(le=i)}else if(e.startsWith("frame")||e.startsWith("size")){const n=e.split("time=")[1].split(" ")[0],i=Ue(n);ze=i/le,r({ratio:ze,time:i})}else e.startsWith("video:")&&(r({ratio:1}),le=0)},Lr=(e,r)=>{const n=e._malloc(r.length*Uint32Array.BYTES_PER_ELEMENT);return r.forEach((i,c)=>{const l=e._malloc(i.length+1);e.writeAsciiToMemory(i,l),e.setValue(n+Uint32Array.BYTES_PER_ELEMENT*c,l,"i32")}),[r.length,n]},De={exports:{}};(function(e,r){(function(n,i){e.exports=i()})(bt,function(){function n(){var i=arguments.length;if(i===0)throw new Error("resolveUrl requires at least one argument; got none.");var c=document.createElement("base");if(c.href=arguments[0],i===1)return c.href;var l=document.getElementsByTagName("head")[0];l.insertBefore(c,l.firstChild);for(var a=document.createElement("a"),f,m=1;m<i;m++)a.href=arguments[m],f=a.href,c.href=f;return l.removeChild(c),f}return n})})(De);const Nr="@ffmpeg/ffmpeg",Pr="0.10.1",Or="FFmpeg WebAssembly version",zr="src/index.js",jr="src/index.d.ts",Mr={example:"examples"},Br={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js",prepublishOnly:"npm run build",lint:"eslint src",wait:"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:node":"node --experimental-wasm-threads --experimental-wasm-bulk-memory node_modules/.bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html"},_r={"./src/node/index.js":"./src/browser/index.js"},Wr={type:"git",url:"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},Ir=["ffmpeg","WebAssembly","video"],Tr="Jerome Wu <jeromewus@gmail.com>",Dr="MIT",Rr={url:"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},xr={node:">=12.16.1"},Ar="https://github.com/ffmpegwasm/ffmpeg.wasm#readme",Vr={"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},Gr={"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.10.0","@types/emscripten":"^1.39.4","babel-loader":"^8.1.0",chai:"^4.2.0",cors:"^2.8.5",eslint:"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1",express:"^4.17.1",mocha:"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.3.0",webpack:"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"};var at={name:Nr,version:Pr,description:Or,main:zr,types:jr,directories:Mr,scripts:Br,browser:_r,repository:Wr,keywords:Ir,author:Tr,license:Dr,bugs:Rr,engines:xr,homepage:Ar,dependencies:Vr,devDependencies:Gr};const{devDependencies:Ur}=at;var Kr={corePath:`https://unpkg.com/@ffmpeg/core@${Ur["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`};const Yr=De.exports,{log:ue}=it,je=async(e,r)=>{ue("info",`fetch ${e}`);const n=await(await fetch(e)).arrayBuffer();ue("info",`${e} file size = ${n.byteLength} bytes`);const i=new Blob([n],{type:r}),c=URL.createObjectURL(i);return ue("info",`${e} blob URL = ${c}`),c};var qr=async({corePath:e})=>{if(typeof e!="string")throw Error("corePath should be a string!");const r=Yr(e),n=await je(r,"application/javascript"),i=await je(r.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),c=await je(r.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return typeof createFFmpegCore=="undefined"?new Promise(l=>{const a=document.createElement("script"),f=()=>{a.removeEventListener("load",f),ue("info","ffmpeg-core.js script loaded"),l({createFFmpegCore,corePath:n,wasmPath:i,workerPath:c})};a.src=n,a.type="text/javascript",a.addEventListener("load",f),document.getElementsByTagName("head")[0].appendChild(a)}):(ue("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:n,wasmPath:i,workerPath:c}))};const Hr=De.exports,Jr=e=>new Promise((r,n)=>{const i=new FileReader;i.onload=()=>{r(i.result)},i.onerror=({target:{error:{code:c}}})=>{n(Error(`File could not be read! Code=${c}`))},i.readAsArrayBuffer(e)});var Xr=async e=>{let r=e;return typeof e=="undefined"?new Uint8Array:(typeof e=="string"?/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?r=atob(e.split(",")[1]).split("").map(n=>n.charCodeAt(0)):r=await(await fetch(Hr(e))).arrayBuffer():(e instanceof File||e instanceof Blob)&&(r=await Jr(e)),new Uint8Array(r))};const Zr=Kr,Qr=qr,en=Xr;var st={defaultOptions:Zr,getCreateFFmpegCore:Qr,fetchFile:en};const{defaultArgs:tn,baseOptions:rn}=kr,{setLogging:Ke,setCustomLogger:Ye,log:X}=it,nn=Er,on=Lr,{defaultOptions:an,getCreateFFmpegCore:sn}=st,{version:ln}=at,Me=Error("ffmpeg.wasm is not ready, make sure you have completed load().");var un=(e={})=>{const{log:r,logger:n,progress:i,...c}={...rn,...an,...e};let l=null,a=null,f=null,m=!1,v=i;const A=h=>{h==="FFMPEG_END"&&f!==null&&(f(),f=null,m=!1)},g=({type:h,message:k})=>{X(h,k),nn(k,v),A(k)},G=async()=>{if(X("info","load ffmpeg-core"),l===null){X("info","loading ffmpeg-core");const{createFFmpegCore:h,corePath:k,workerPath:b,wasmPath:I}=await sn(c);l=await h({mainScriptUrlOrBlob:k,printErr:z=>g({type:"fferr",message:z}),print:z=>g({type:"ffout",message:z}),locateFile:(z,D)=>{if(typeof window!="undefined"){if(typeof I!="undefined"&&z.endsWith("ffmpeg-core.wasm"))return I;if(typeof b!="undefined"&&z.endsWith("ffmpeg-core.worker.js"))return b}return D+z}}),a=l.cwrap("proxy_main","number",["number","number"]),X("info","ffmpeg-core loaded")}else throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.")},W=()=>l!==null,S=(...h)=>{if(X("info",`run ffmpeg command: ${h.join(" ")}`),l===null)throw Me;if(m)throw Error("ffmpeg.wasm can only run one command at a time");return m=!0,new Promise(k=>{const b=[...tn,...h].filter(I=>I.length!==0);f=k,a(...on(l,b))})},w=(h,...k)=>{if(X("info",`run FS.${h} ${k.map(b=>typeof b=="string"?b:`<${b.length} bytes binary file>`).join(" ")}`),l===null)throw Me;{let b=null;try{b=l.FS[h](...k)}catch{throw Error(h==="readdir"?`ffmpeg.FS('readdir', '${k[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`:h==="readFile"?`ffmpeg.FS('readFile', '${k[0]}') error. Check if the path exists`:"Oops, something went wrong in FS operation.")}return b}},B=()=>{if(l===null)throw Me;m=!1,l.exit(1),l=null,a=null,f=null},O=h=>{v=h},C=h=>{Ye(h)};return Ke(r),Ye(n),X("info",`use ffmpeg.wasm v${ln}`),{setProgress:O,setLogger:C,setLogging:Ke,load:G,isLoaded:W,run:S,exit:B,FS:w}};const cn=un,{fetchFile:dn}=st;var qe={createFFmpeg:cn,fetchFile:dn};let F=null;function Fn(){"SharedArrayBuffer"in window||pe.error("\u6D4F\u89C8\u5668\u4E0D\u652F\u6301 SharedArrayBuffer\uFF0C \u65E0\u6CD5\u4F7F\u7528\u89C6\u9891\u529F\u80FD\uFF01"),F||(F=qe.createFFmpeg({log:!0})),pt(e),ht(()=>{F=null});async function e(){F!=null&&F.isLoaded()||await(F==null?void 0:F.load())}function r(l){F&&F.setProgress(l)}async function n(l){try{F&&F.FS("writeFile",l.name,await qe.fetchFile(l))}catch{pe.error("\u5199\u5165\u6587\u4EF6\u5931\u8D25\uFF01\u8BF7\u91CD\u8BD5")}}function i(l){try{return F?F.FS("readFile",l).buffer:null}catch{pe.error("\u8BFB\u53D6\u6587\u4EF6\u5931\u8D25\uFF01\u8BF7\u91CD\u8BD5")}return null}async function c(l){const a={url:"",size:0};if(!F)return a;const{outputName:f,fileType:m}=l;try{await F.run(...fn(l));const v=await i(`${f}.${m}`);return a.url=wt(v,m),a.size=(v==null?void 0:v.byteLength)||0,a}catch{pe.error("\u6587\u4EF6\u64CD\u4F5C\u5931\u8D25\uFF01\u8BF7\u91CD\u8BD5")}return a}return{ffmpeg:F,loadFFmpeg:e,setProgress:r,writeFile:n,readFile:i,ffmpegRun:c}}function fn(e){const{filename:r,frameRate:n=25,rangeStart:i=0,rangeEnd:c,width:l=-1,height:a=-1,fileType:f,outputName:m="output",type:v}=e;return{image:`-ss ${i} -i ${r} -s ${l}x${a} -f image2 -frames 1 ${m}.${f}`,video:`-i ${r} -r ${n} -ss ${i} -to ${c} -vf scale=${l}:${a},fade=t=in:st=${i}:d=0.05 ${m}.${f}`}[v].split(/(?:\s+)/)}function En(e,r){return Number(Number(e||0).toFixed(r))}export{kn as I,Sn as P,rr as a,En as f,Cn as g,ne as i,Fn as u};
