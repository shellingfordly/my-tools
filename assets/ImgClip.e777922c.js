var Y=Object.defineProperty;var j=(t,e,r)=>e in t?Y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var E=(t,e,r)=>(j(t,typeof e!="symbol"?e+"":e,r),r);import{B as M}from"./index.be275d6f.js";import{s as G}from"./selectFile.a2607bdd.js";import{I as n,s as K,t as $,a5 as q,a6 as J,a7 as Z,r as w,c as A,y as U,j as I,R as H,v as ee,_ as te,d as re,o as O,a as P,B as ne,w as ae,C as se,f,F as oe,a0 as ie,a1 as le}from"./index.13efb4fa.js";import"./handleFile.719ba7a4.js";var W="/assets/img.0a3763bd.jpg";class ce{constructor(e,r){E(this,"canvas");E(this,"imgFile");this.canvas=e,this.imgFile=r,this.initCanvas(e,r)}getPixelRatio(e){var r=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/r}initCanvas(e,r){this.initImageInfo(r).then(a=>{const s=e.getContext("2d"),o=this.getPixelRatio(s);this.canvas.width=a.width*o,this.canvas.height=a.height*o,s&&s.drawImage(a,0,0)})}initImageInfo(e){return new Promise(r=>{const a=URL.createObjectURL(e),s=new Image;s.src=a,s.onload=()=>{URL.revokeObjectURL(a),r(s)}})}}async function ue(t,e){return new ce(t,e),{}}var T;const b=typeof window!="undefined",ve=t=>typeof t=="string",pe=()=>{};b&&((T=window==null?void 0:window.navigator)==null?void 0:T.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function m(t){return typeof t=="function"?t():n(t)}function fe(t){return t}function de(t){return J()?(Z(t),!0):!1}var _e=Object.defineProperty,he=Object.defineProperties,ge=Object.getOwnPropertyDescriptors,N=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,V=(t,e,r)=>e in t?_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,me=(t,e)=>{for(var r in e||(e={}))ye.call(e,r)&&V(t,r,e[r]);if(N)for(var r of N(e))we.call(e,r)&&V(t,r,e[r]);return t},xe=(t,e)=>he(t,ge(e));function Oe(t){if(!K(t))return $(t);const e=Array.isArray(t.value)?new Array(t.value.length):{};for(const r in t.value)e[r]=q(()=>({get(){return t.value[r]},set(a){if(Array.isArray(t.value)){const s=[...t.value];s[r]=a,t.value=s}else{const s=xe(me({},t.value),{[r]:a});Object.setPrototypeOf(s,t.value),t.value=s}}}));return e}function X(t){var e;const r=m(t);return(e=r==null?void 0:r.$el)!=null?e:r}const R=b?window:void 0;b&&window.document;b&&window.navigator;b&&window.location;function y(...t){let e,r,a,s;if(ve(t[0])||Array.isArray(t[0])?([r,a,s]=t,e=R):[e,r,a,s]=t,!e)return pe;Array.isArray(r)||(r=[r]),Array.isArray(a)||(a=[a]);const o=[],v=()=>{o.forEach(p=>p()),o.length=0},i=(p,h,d,g)=>(p.addEventListener(h,d,g),()=>p.removeEventListener(h,d,g)),l=U(()=>[X(e),m(s)],([p,h])=>{v(),p&&o.push(...r.flatMap(d=>a.map(g=>i(p,d,g,h))))},{immediate:!0,flush:"post"}),_=()=>{l(),v()};return de(_),_}const C=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},S="__vueuse_ssr_handlers__";C[S]=C[S]||{};C[S];var Pe=Object.defineProperty,be=Object.defineProperties,Ie=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertySymbols,Ee=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable,F=(t,e,r)=>e in t?Pe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Se=(t,e)=>{for(var r in e||(e={}))Ee.call(e,r)&&F(t,r,e[r]);if(D)for(var r of D(e))Ce.call(e,r)&&F(t,r,e[r]);return t},$e=(t,e)=>be(t,Ie(e));function Re(t,e={}){var r,a,s;const o=(r=e.draggingElement)!=null?r:R,v=(a=e.handle)!=null?a:t,i=w((s=m(e.initialValue))!=null?s:{x:0,y:0}),l=w(),_=c=>e.pointerTypes?e.pointerTypes.includes(c.pointerType):!0,p=c=>{m(e.preventDefault)&&c.preventDefault(),m(e.stopPropagation)&&c.stopPropagation()},h=c=>{var u;if(!_(c)||m(e.exact)&&c.target!==m(t))return;const x=m(t).getBoundingClientRect(),B={x:c.clientX-x.left,y:c.clientY-x.top};((u=e.onStart)==null?void 0:u.call(e,B,c))!==!1&&(l.value=B,p(c))},d=c=>{var u;!_(c)||!l.value||(i.value={x:c.clientX-l.value.x,y:c.clientY-l.value.y},(u=e.onMove)==null||u.call(e,i.value,c),p(c))},g=c=>{var u;!_(c)||!l.value||(l.value=void 0,(u=e.onEnd)==null||u.call(e,i.value,c),p(c))};return b&&(y(v,"pointerdown",h,!0),y(o,"pointermove",d,!0),y(o,"pointerup",g,!0)),$e(Se({},Oe(i)),{position:i,isDragging:A(()=>!!l.value),style:A(()=>`left:${i.value.x}px;top:${i.value.y}px;`)})}function ke(t={}){const{type:e="page",touch:r=!0,resetOnTouchEnds:a=!1,initialValue:s={x:0,y:0},window:o=R,eventFilter:v}=t,i=w(s.x),l=w(s.y),_=w(null),p=u=>{e==="page"?(i.value=u.pageX,l.value=u.pageY):e==="client"?(i.value=u.clientX,l.value=u.clientY):e==="movement"&&(i.value=u.movementX,l.value=u.movementY),_.value="mouse"},h=()=>{i.value=s.x,l.value=s.y},d=u=>{if(u.touches.length>0){const x=u.touches[0];e==="page"?(i.value=x.pageX,l.value=x.pageY):e==="client"&&(i.value=x.clientX,l.value=x.clientY),_.value="touch"}},g=u=>v===void 0?p(u):v(()=>p(u),{}),c=u=>v===void 0?d(u):v(()=>d(u),{});return o&&(y(o,"mousemove",g,{passive:!0}),y(o,"dragover",g,{passive:!0}),r&&e!=="movement"&&(y(o,"touchstart",c,{passive:!0}),y(o,"touchmove",c,{passive:!0}),a&&y(o,"touchend",h,{passive:!0}))),{x:i,y:l,sourceType:_}}var z;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(z||(z={}));var Be=Object.defineProperty,L=Object.getOwnPropertySymbols,Ae=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable,Q=(t,e,r)=>e in t?Be(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ne=(t,e)=>{for(var r in e||(e={}))Ae.call(e,r)&&Q(t,r,e[r]);if(L)for(var r of L(e))Te.call(e,r)&&Q(t,r,e[r]);return t};const Ve={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Ne({linear:fe},Ve);function De(t,e,r){const a=I({x:0,y:0});return r&&(a.x=n(r).x,a.y=n(r).y),Re(e,{initialValue:n(a),onMove(s){var v;const o=(v=n(t))==null?void 0:v.getBoundingClientRect();a.x=s.x-o.left,a.y=s.y-o.top}}),{...$(a),position:a}}function Fe(t,e){const{x:r,y:a}=ke(),s=w(!1),o=I({x:0,y:0}),v=I({...n(e.initialValue)}),i=n(e.initialValue),l=[];H(()=>{s.value&&(v.w=i.w+r.value-o.x,v.h=i.h+a.value-o.y)});const _=U(()=>X(t),d=>{p(),d&&h()}),p=()=>{l.forEach(d=>d()),l.length=0},h=()=>{const d=y(t,"mousedown",()=>{s.value=!0,o.x=r.value,o.y=a.value}),g=y(document,"mouseup",()=>{s.value=!1,i.w=v.w,i.h=v.h});l.push(d,g)};return ee(()=>{p(),_()}),{...$(v),rect:v}}const k=t=>(ie("data-v-e4e5eb38"),t=t(),le(),t),ze={relative:"","h-500px":"","w-400px":""},Le=k(()=>f("div",{class:"w-100% h-100% absolute bg-black opacity-1 z-3","clip-path":"url(#svgClipPath)"},null,-1)),Qe=k(()=>f("img",{src:W,filter:"url(#myFilter)","clip-path":"url(#svgClipPath)"},null,-1)),Ue=[Le,Qe],He={absolute:"","overflow-visible":"","z-2":""},We={"overflow-visible":"","cursor-pointer":"",height:"500px",width:"400"},Xe={id:"svgClipPath"},Ye=["x","y","width","height"],je=k(()=>f("image",{width:"100%","xlink:href":W,"clip-path":"url(#svgClipPath)"},null,-1)),Me=["x","y","width","height"],Ge={"overflow-visible":"","cursor-nwse-resize":"",class:"handle"},Ke=["cx","cy"],qe=["cx","cy"],Je={"overflow-visible":"","cursor-nesw-resize":"",class:"handle"},Ze=["cx","cy"],et=["cx","cy"],tt={"overflow-visible":"","cursor-nesw-resize":"",class:"tr handle"},rt=["cx","cy"],nt=["cx","cy"],at={"overflow-visible":"","cursor-nwse-resize":"",class:"tr handle"},st=["cx","cy"],ot=["cx","cy"],it=re({__name:"ImgClip",setup(t){const e=I({x:0,y:0,w:300,h:300}),r=w(),a=w(),s=w(),o=w(),{x:v,y:i}=De(a,s),{rect:l}=Fe(o,{initialValue:{w:e.w,h:e.h}});H(()=>{e.x=v.value,e.y=i.value,e.w=l.w,e.h=l.h});async function _(){const p=await G("image");await ue(r.value,p)}return(p,h)=>{const d=M;return O(),P(oe,null,[ne(d,{onClick:_},{default:ae(()=>[se("\u4E0A\u4F20\u56FE\u7247")]),_:1}),f("div",ze,[f("div",{ref_key:"containerRef",ref:a,class:"container",absolute:"","overflow-visible":""},Ue,512),f("div",He,[(O(),P("svg",We,[f("defs",null,[f("mask",Xe,[f("rect",{x:n(e).x,y:n(e).y,width:n(e).w,height:n(e).h,fill:"white"},null,8,Ye)])]),je,f("rect",{ref_key:"targetRef",ref:s,class:"main","cursor-move":"",x:n(e).x,y:n(e).y,width:n(e).w,height:n(e).h},null,8,Me),f("g",{ref_key:"scaleRef",ref:o},[(O(),P("svg",Ge,[f("circle",{cx:n(e).x,cy:n(e).y,r:"6","cursor-nwse-resize":"",fill:"rgb(255, 255, 255)"},null,8,Ke),f("circle",{cx:n(e).x,cy:n(e).y,r:"6",fill:"rgb(255, 255, 255)","cursor-nwse-resize":""},null,8,qe)])),(O(),P("svg",Je,[f("circle",{cx:n(e).x+n(e).w,cy:n(e).y,r:"6",fill:"rgb(255, 255, 255)"},null,8,Ze),f("circle",{cx:n(e).x+n(e).w,cy:n(e).y,r:"6",fill:"rgb(255, 255, 255)"},null,8,et)])),(O(),P("svg",tt,[f("circle",{cx:n(e).x,cy:n(e).y+n(e).h,r:"6",fill:"rgb(255, 255, 255)"},null,8,rt),f("circle",{cx:n(e).x,cy:n(e).y+n(e).h,r:"6",fill:"rgb(255, 255, 255)"},null,8,nt)])),(O(),P("svg",at,[f("circle",{cx:n(e).x+n(e).w,cy:n(e).y+n(e).h,r:"6",fill:"rgb(255, 255, 255)"},null,8,st),f("circle",{cx:n(e).x+n(e).w,cy:n(e).y+n(e).h,r:"6",fill:"rgb(255, 255, 255)"},null,8,ot)]))],512)]))])])],64)}}});var ft=te(it,[["__scopeId","data-v-e4e5eb38"]]);export{ft as default};
