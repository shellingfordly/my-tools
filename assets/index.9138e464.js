import{r as m,d as $e,t as Pe,c as O,u as Te,L as Me,x as re,g as S,o as d,h as $,w as E,W as De,O as R,P as X,a as P,D as A,n as h,e as U,i as p,T as ue,f as q,b as J,S as fe,m as Q,y as Z,z as x,$ as de}from"./index.51e79113.js";import{z as Ee,A as Ae,o as H,a as ne,g as _e,r as Ie,q as je,i as ce,l as L,B as ze,C as Ne,_ as Le,D as Ve,E as ee,h as Fe,s as He,b as Ke}from"./index.d66503d3.js";import{B as We,I as Ge,c as Ye,g as Re,h as Xe,i as Ue,M as qe}from"./index.112b9d80.js";import{C as Je,a as Qe}from"./index.162d382c.js";import{a as Ze}from"./index.de7ee226.js";import{u as xe,K as eo}from"./keyboard.9af3354b.js";var ko=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};const oo=e=>{const o=m(!1),l={overflow:"",width:"",boxSizing:""};return{setOverflowHidden:()=>{if(e.value){const n=e.value;if(!o.value&&n.style.overflow!=="hidden"){const a=Ee(n);(a>0||Ae(n))&&(l.overflow=n.style.overflow,l.width=n.style.width,l.boxSizing=n.style.boxSizing,n.style.overflow="hidden",n.style.width=`${n.offsetWidth-a}px`,n.style.boxSizing="border-box",o.value=!0)}}},resetOverflow:()=>{if(e.value&&o.value){const n=e.value;n.style.overflow=l.overflow,n.style.width=l.width,n.style.boxSizing=l.boxSizing,o.value=!1}}}},lo=({modalRef:e,wrapperRef:o,draggable:l})=>{const r=m(!1),t=m([0,0]),n=m([0,0]),a=m([0,0]),u=m(),f=m([0,0]),v=()=>{var c,i;if(o.value&&e.value){const{top:B,left:w}=o.value.getBoundingClientRect(),{clientWidth:g,clientHeight:V}=o.value,{top:W,left:_,width:I,height:j}=e.value.getBoundingClientRect(),z=_-w,D=W-B;(z!==((c=a.value)==null?void 0:c[0])||D!==((i=a.value)==null?void 0:i[1]))&&(a.value=[z,D]);const b=g>I?g-I:0,F=V>j?V-j:0;(b!==f.value[0]||F!==f.value[1])&&(f.value=[b,F])}},C=c=>{l.value&&(c.preventDefault(),r.value=!0,v(),t.value=[c.x,c.y],n.value=[0,0],H(window,"mousemove",M),H(window,"mouseup",y),H(window,"contextmenu",y))},M=c=>{if(r.value){const i=c.x-t.value[0],B=c.y-t.value[1];let w=a.value[0]+i,g=a.value[1]+B;w<0&&(w=0),w>f.value[0]&&(w=f.value[0]),g<0&&(g=0),g>f.value[1]&&(g=f.value[1]),u.value=[w,g]}},y=()=>{r.value=!1,ne(window,"mousemove",M),ne(window,"mouseup",y)};return{position:u,handleMoveDown:C}};var no=Object.defineProperty,me=Object.getOwnPropertySymbols,to=Object.prototype.hasOwnProperty,ao=Object.prototype.propertyIsEnumerable,ve=(e,o,l)=>o in e?no(e,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[o]=l,so=(e,o)=>{for(var l in o||(o={}))to.call(o,l)&&ve(e,l,o[l]);if(me)for(var l of me(o))ao.call(o,l)&&ve(e,l,o[l]);return e},io=$e({name:"Modal",components:{ClientOnly:Je,ArcoButton:We,IconHover:Ge,IconClose:Ye,IconInfoCircleFill:Ze,IconCheckCircleFill:Re,IconExclamationCircleFill:Xe,IconCloseCircleFill:Ue},inheritAttrs:!1,props:{visible:{type:Boolean,default:void 0},defaultVisible:{type:Boolean,default:!1},width:{type:[Number,String]},top:{type:[Number,String]},mask:{type:Boolean,default:!0},title:{type:String},titleAlign:{type:String,default:"center"},alignCenter:{type:Boolean,default:!0},unmountOnClose:Boolean,maskClosable:{type:Boolean,default:!0},hideCancel:{type:Boolean,default:!1},simple:{type:Boolean,default:e=>e.notice},closable:{type:Boolean,default:!0},okText:String,cancelText:String,okLoading:{type:Boolean,default:!1},okButtonProps:{type:Object},cancelButtonProps:{type:Object},footer:{type:Boolean,default:!0},renderToBody:{type:Boolean,default:!0},popupContainer:{type:[String,Object],default:"body"},maskStyle:{type:Object},modalClass:{type:[String,Array]},modalStyle:{type:Object},onBeforeOk:{type:[Function,Array]},onBeforeCancel:{type:[Function,Array]},escToClose:{type:Boolean,default:!0},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},maskAnimationName:{type:String,default:e=>e.fullscreen?"fade-in-standard":"fade-modal"},modalAnimationName:{type:String,default:e=>e.fullscreen?"zoom-in":"zoom-modal"},bodyClass:{type:[String,Array]},bodyStyle:{type:[String,Object,Array]},messageType:{type:String}},emits:["update:visible","ok","cancel","open","close","beforeOpen","beforeClose"],setup(e,{emit:o}){const{fullscreen:l,popupContainer:r}=Pe(e),t=_e("modal"),{t:n}=xe(),a=m(),u=m(),f=m(e.defaultVisible),v=O(()=>{var s;return(s=e.visible)!=null?s:f.value}),C=m(!1),M=O(()=>e.okLoading||C.value),y=O(()=>e.draggable&&!e.fullscreen),{teleportContainer:c,containerRef:i}=Qe({popupContainer:r,visible:v}),B=m(v.value),w=O(()=>e.okText||n("modal.okText")),g=O(()=>e.cancelText||n("modal.cancelText")),{zIndex:V,isLastDialog:W}=Ie("dialog",{visible:v});let _=!1;const I=s=>{e.escToClose&&s.key===eo.ESC&&W()&&G()},j=()=>{e.escToClose&&!_&&(_=!0,H(document.documentElement,"keydown",I))},z=()=>{_=!1,ne(document.documentElement,"keydown",I)};let D=0;const{position:b,handleMoveDown:F}=lo({wrapperRef:a,modalRef:u,draggable:y}),te=()=>{D++,C.value&&(C.value=!1),f.value=!1,o("update:visible",!1)},be=()=>{const s=D;new Promise(N=>{if(L(e.onBeforeOk)){const ie=e.onBeforeOk(N);ze(ie)?N(ie):C.value=!0}else N()}).then((N=!0)=>{s===D&&(C.value=!1,N&&(o("ok"),te()))})},G=()=>{var s;let k=!0;L(e.onBeforeCancel)&&(k=(s=e.onBeforeCancel())!=null?s:!1),k&&(o("cancel"),te())},Y=m(!1),Ce=s=>{s.target===a.value&&(Y.value=!0)},we=()=>{e.mask&&e.maskClosable&&Y.value&&G()},he=()=>{v.value&&(!Ne(a.value,document.activeElement)&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),o("open"))},ke=()=>{v.value||(y.value&&(b.value=void 0),B.value=!1,se(),o("close"))},{setOverflowHidden:ae,resetOverflow:se}=oo(i);Te(()=>{i.value=je(e.popupContainer),v.value&&(ae(),e.escToClose&&j())}),Me(()=>{se(),z()}),re(v,s=>{f.value!==s&&(f.value=s),s?(o("beforeOpen"),B.value=!0,Y.value=!1,ae(),j()):(o("beforeClose"),z())}),re(l,()=>{b.value&&(b.value=void 0)});const Oe=O(()=>[`${t}-wrapper`,{[`${t}-wrapper-align-center`]:e.alignCenter&&!e.fullscreen,[`${t}-wrapper-moved`]:Boolean(b.value)}]),Se=O(()=>[`${t}`,e.modalClass,{[`${t}-simple`]:e.simple,[`${t}-draggable`]:y.value,[`${t}-fullscreen`]:e.fullscreen}]),Be=O(()=>{var s;const k=so({},(s=e.modalStyle)!=null?s:{});return e.width&&(k.width=ce(e.width)?`${e.width}px`:e.width),!e.alignCenter&&e.top&&(k.top=ce(e.top)?`${e.top}px`:e.top),b.value&&(k.transform=`translate(${b.value[0]}px, ${b.value[1]}px)`),k});return{prefixCls:t,mounted:B,computedVisible:v,containerRef:i,wrapperRef:a,mergedModalStyle:Be,okDisplayText:w,cancelDisplayText:g,zIndex:V,handleOk:be,handleCancel:G,handleMaskClick:we,handleMaskMouseDown:Ce,handleOpen:he,handleClose:ke,mergedOkLoading:M,modalRef:u,wrapperCls:Oe,modalCls:Se,teleportContainer:c,handleMoveDown:F}}});function ro(e,o,l,r,t,n){const a=S("icon-info-circle-fill"),u=S("icon-check-circle-fill"),f=S("icon-exclamation-circle-fill"),v=S("icon-close-circle-fill"),C=S("icon-close"),M=S("icon-hover"),y=S("arco-button"),c=S("client-only");return d(),$(c,null,{default:E(()=>[(d(),$(De,{to:e.teleportContainer,disabled:!e.renderToBody},[!e.unmountOnClose||e.computedVisible||e.mounted?R((d(),P("div",Q({key:0},e.$attrs,{class:`${e.prefixCls}-container`,style:{zIndex:e.zIndex}}),[A(ue,{name:e.maskAnimationName,appear:""},{default:E(()=>[e.mask?R((d(),P("div",{key:0,ref:"maskRef",class:h(`${e.prefixCls}-mask`),style:U(e.maskStyle)},null,6)),[[X,e.computedVisible]]):p("v-if",!0)]),_:1},8,["name"]),q("div",{ref:"wrapperRef",class:h(e.wrapperCls),onClick:o[2]||(o[2]=fe((...i)=>e.handleMaskClick&&e.handleMaskClick(...i),["self"])),onMousedown:o[3]||(o[3]=fe((...i)=>e.handleMaskMouseDown&&e.handleMaskMouseDown(...i),["self"]))},[A(ue,{name:e.modalAnimationName,appear:"",onAfterEnter:e.handleOpen,onAfterLeave:e.handleClose},{default:E(()=>[R(q("div",{ref:"modalRef",class:h(e.modalCls),style:U(e.mergedModalStyle)},[e.$slots.title||e.title||e.closable?(d(),P("div",{key:0,class:h(`${e.prefixCls}-header`),onMousedown:o[1]||(o[1]=(...i)=>e.handleMoveDown&&e.handleMoveDown(...i))},[e.$slots.title||e.title?(d(),P("div",{key:0,class:h([`${e.prefixCls}-title`,`${e.prefixCls}-title-align-${e.titleAlign}`])},[e.messageType?(d(),P("div",{key:0,class:h(`${e.prefixCls}-title-icon`)},[e.messageType==="info"?(d(),$(a,{key:0})):p("v-if",!0),e.messageType==="success"?(d(),$(u,{key:1})):p("v-if",!0),e.messageType==="warning"?(d(),$(f,{key:2})):p("v-if",!0),e.messageType==="error"?(d(),$(v,{key:3})):p("v-if",!0)],2)):p("v-if",!0),J(e.$slots,"title",{},()=>[Z(x(e.title),1)])],2)):p("v-if",!0),!e.simple&&e.closable?(d(),P("div",{key:1,tabindex:"-1",role:"button","aria-label":"Close",class:h(`${e.prefixCls}-close-btn`),onClick:o[0]||(o[0]=(...i)=>e.handleCancel&&e.handleCancel(...i))},[A(M,null,{default:E(()=>[A(C)]),_:1})],2)):p("v-if",!0)],34)):p("v-if",!0),q("div",{class:h([`${e.prefixCls}-body`,e.bodyClass]),style:U(e.bodyStyle)},[J(e.$slots,"default")],6),e.footer?(d(),P("div",{key:1,class:h(`${e.prefixCls}-footer`)},[J(e.$slots,"footer",{},()=>[e.hideCancel?p("v-if",!0):(d(),$(y,Q({key:0},e.cancelButtonProps,{onClick:e.handleCancel}),{default:E(()=>[Z(x(e.cancelDisplayText),1)]),_:1},16,["onClick"])),A(y,Q({type:"primary"},e.okButtonProps,{loading:e.mergedOkLoading,onClick:e.handleOk}),{default:E(()=>[Z(x(e.okDisplayText),1)]),_:1},16,["loading","onClick"])])],2)):p("v-if",!0)],6),[[X,e.computedVisible]])]),_:3},8,["name","onAfterEnter","onAfterLeave"])],34)],16)),[[X,e.computedVisible||e.mounted]]):p("v-if",!0)],8,["to","disabled"]))]),_:3})}var K=Le(io,[["render",ro]]),uo=Object.defineProperty,fo=Object.defineProperties,co=Object.getOwnPropertyDescriptors,pe=Object.getOwnPropertySymbols,mo=Object.prototype.hasOwnProperty,vo=Object.prototype.propertyIsEnumerable,ye=(e,o,l)=>o in e?uo(e,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[o]=l,T=(e,o)=>{for(var l in o||(o={}))mo.call(o,l)&&ye(e,l,o[l]);if(pe)for(var l of pe(o))vo.call(o,l)&&ye(e,l,o[l]);return e},po=(e,o)=>fo(e,co(o));const oe=(e,o)=>{let l=Ve("modal");const r=()=>{u.component&&(u.component.props.visible=!1),L(e.onOk)&&e.onOk()},t=()=>{u.component&&(u.component.props.visible=!1),L(e.onCancel)&&e.onCancel()},n=()=>{l&&(de(null,l),document.body.removeChild(l)),l=null,L(e.onClose)&&e.onClose()},a={visible:!0,renderToBody:!1,onOk:r,onCancel:t,onClose:n},u=A(K,T(T(T({},Fe(e,["content","title","footer"])),{footer:typeof e.footer=="boolean"?e.footer:void 0}),a),{default:ee(e.content),title:ee(e.title),footer:typeof e.footer!="boolean"?ee(e.footer):void 0});return(o!=null?o:ge._context)&&(u.appContext=o!=null?o:ge._context),de(u,l),document.body.appendChild(l),{close:n}},le=T({open:oe,confirm:(e,o)=>{const l=T({simple:!0},e);return oe(l,o)}},qe.reduce((e,o)=>(e[o]=(l,r)=>{const t=T({simple:!0,hideCancel:!0,messageType:o},l);return oe(t,r)},e),{})),ge=Object.assign(K,po(T({},le),{install:(e,o)=>{He(e,o);const l=Ke(o);e.component(l+K.name,K);const r={};for(const t of Object.keys(le))r[t]=(n,a=e._context)=>le[t](n,a);e.config.globalProperties.$modal=r},_context:null}));export{ge as M,ko as c};
