import{k as Ae,p as $e,j as ve,l as je,q as le,g as Ve,h as We,c as De,r as ke,t as Ne,o as oe,v as Ie,a as He,s as Ge,b as Ue}from"./index.d66503d3.js";import{r as m,u as j,R as G,d as U,x as $,L as me,t as qe,c as B,s as ne,p as Ke,j as Xe,D as w,W as Ye,m as Qe,T as Je,O as Ze,P as Re,F as et,Q as tt}from"./index.51e79113.js";const be=typeof window=="undefined"?global:window,lt=be.requestAnimationFrame,ae=be.cancelAnimationFrame;function ot(e){let t=0;const l=(...o)=>{t&&ae(t),t=lt(()=>{e(...o),t=0})};return l.cancel=()=>{ae(t),t=0},l}var nt=Object.defineProperty,re=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable,ie=(e,t,l)=>t in e?nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,M=(e,t)=>{for(var l in t||(t={}))at.call(t,l)&&ie(e,l,t[l]);if(re)for(var l of re(t))rt.call(t,l)&&ie(e,l,t[l]);return e};const it=()=>({width:document.documentElement.clientWidth||window.innerWidth,height:document.documentElement.clientHeight||window.innerHeight}),se=(e,t)=>{var l,o;const a=e.getBoundingClientRect();return{top:a.top,bottom:a.bottom,left:a.left,right:a.right,scrollTop:a.top-t.top,scrollBottom:a.bottom-t.top,scrollLeft:a.left-t.left,scrollRight:a.right-t.left,width:(l=e.offsetWidth)!=null?l:e.clientWidth,height:(o=e.offsetHeight)!=null?o:e.clientHeight}},st=e=>{switch(e){case"top":case"tl":case"tr":return"top";case"bottom":case"bl":case"br":return"bottom";case"left":case"lt":case"lb":return"left";case"right":case"rt":case"rb":return"right";default:return"top"}},A=(e,t)=>{switch(t){case"top":switch(e){case"bottom":return"top";case"bl":return"tl";case"br":return"tr";default:return e}case"bottom":switch(e){case"top":return"bottom";case"tl":return"bl";case"tr":return"br";default:return e}case"left":switch(e){case"right":return"left";case"rt":return"lt";case"rb":return"lb";default:return e}case"right":switch(e){case"left":return"right";case"lt":return"rt";case"lb":return"rb";default:return e}default:return e}},ut=(e,t,{containerRect:l,triggerRect:o,popupRect:a,offset:s,translate:r})=>{const f=st(e),u=it(),d={top:l.top+t.top,bottom:u.height-(l.top+t.top+a.height),left:l.left+t.left,right:u.width-(l.left+t.left+a.width)};let c=e;if(f==="top"&&d.top<0)if(o.top>a.height)t.top=-l.top;else{const v=F("bottom",o,a,{offset:s,translate:r});u.height-(l.top+v.top+a.height)>0&&(c=A(e,"bottom"),t.top=v.top)}if(f==="bottom"&&d.bottom<0)if(u.height-o.bottom>a.height)t.top=-l.top+(u.height-a.height);else{const v=F("top",o,a,{offset:s,translate:r});l.top+v.top>0&&(c=A(e,"top"),t.top=v.top)}if(f==="left"&&d.left<0)if(o.left>a.width)t.left=-l.left;else{const v=F("right",o,a,{offset:s,translate:r});u.width-(l.left+v.left+a.width)>0&&(c=A(e,"right"),t.left=v.left)}if(f==="right"&&d.right<0)if(u.width-o.right>a.width)t.left=-l.left+(u.width-a.width);else{const v=F("left",o,a,{offset:s,translate:r});l.left+v.left>0&&(c=A(e,"left"),t.left=v.left)}return(f==="top"||f==="bottom")&&(d.left<0?t.left=-l.left:d.right<0&&(t.left=-l.left+(u.width-a.width))),(f==="left"||f==="right")&&(d.top<0?t.top=-l.top:d.bottom<0&&(t.top=-l.top+(u.height-a.height))),{popupPosition:t,position:c}},F=(e,t,l,{offset:o=0,translate:a=[0,0]}={})=>{var s;const r=(s=Ae(a)?a:a[e])!=null?s:[0,0];switch(e){case"top":return{left:t.scrollLeft+Math.round(t.width/2)-Math.round(l.width/2)+r[0],top:t.scrollTop-l.height-o+r[1]};case"tl":return{left:t.scrollLeft+r[0],top:t.scrollTop-l.height-o+r[1]};case"tr":return{left:t.scrollRight-l.width+r[0],top:t.scrollTop-l.height-o+r[1]};case"bottom":return{left:t.scrollLeft+Math.round(t.width/2)-Math.round(l.width/2)+r[0],top:t.scrollBottom+o+r[1]};case"bl":return{left:t.scrollLeft+r[0],top:t.scrollBottom+o+r[1]};case"br":return{left:t.scrollRight-l.width+r[0],top:t.scrollBottom+o+r[1]};case"left":return{left:t.scrollLeft-l.width-o+r[0],top:t.scrollTop+Math.round(t.height/2)-Math.round(l.height/2)+r[1]};case"lt":return{left:t.scrollLeft-l.width-o+r[0],top:t.scrollTop+r[1]};case"lb":return{left:t.scrollLeft-l.width-o+r[0],top:t.scrollBottom-l.height+r[1]};case"right":return{left:t.scrollRight+o+r[0],top:t.scrollTop+Math.round(t.height/2)-Math.round(l.height/2)+r[1]};case"rt":return{left:t.scrollRight+o+r[0],top:t.scrollTop+r[1]};case"rb":return{left:t.scrollRight+o+r[0],top:t.scrollBottom-l.height+r[1]};default:return{left:0,top:0}}},ft=e=>{let t="0";["top","bottom"].includes(e)?t="50%":["left","lt","lb","tr","br"].includes(e)&&(t="100%");let l="0";return["left","right"].includes(e)?l="50%":["top","tl","tr","lt","rt"].includes(e)&&(l="100%"),`${t} ${l}`},dt=(e,t,l,o,{offset:a=0,translate:s=[0,0],customStyle:r={},autoFitPosition:f=!1}={})=>{let u=e,d=F(e,l,o,{offset:a,translate:s});if(f){const v=ut(e,d,{containerRect:t,popupRect:o,triggerRect:l,offset:a,translate:s});d=v.popupPosition,u=v.position}return{style:M({left:`${d.left}px`,top:`${d.top}px`},r),position:u}},ct=(e,t,l,{customStyle:o={}})=>{if(["top","tl","tr","bottom","bl","br"].includes(e)){let s=Math.abs(t.scrollLeft+t.width/2-l.scrollLeft);return s>l.width-8&&(t.width>l.width?s=l.width/2:s=l.width-8),["top","tl","tr"].includes(e)?M({left:`${s}px`,bottom:"0",transform:"translate(-50%,50%) rotate(45deg)"},o):M({left:`${s}px`,top:"0",transform:"translate(-50%,-50%) rotate(45deg)"},o)}let a=Math.abs(t.scrollTop+t.height/2-l.scrollTop);return a>l.height-8&&(t.height>l.height?a=l.height/2:a=l.height-8),["left","lt","lb"].includes(e)?M({top:`${a}px`,right:"0",transform:"translate(50%,-50%) rotate(45deg)"},o):M({top:`${a}px`,left:"0",transform:"translate(-50%,-50%) rotate(45deg)"},o)},ht=e=>e.scrollHeight>e.offsetHeight||e.scrollWidth>e.offsetWidth,ue=e=>{var t;const l=[];let o=e;for(;o&&o!==document.documentElement;)ht(o)&&l.push(o),o=(t=o.parentElement)!=null?t:void 0;return l},ye=()=>{const e={},t=m(),l=()=>{const o=$e(e.value);o!==t.value&&(t.value=o)};return j(()=>l()),G(()=>l()),{children:e,firstElement:t}};var fe=U({name:"ResizeObserver",props:{watchOnUpdated:Boolean},emits:["resize"],setup(e,{emit:t,slots:l}){const{children:o,firstElement:a}=ye();let s;const r=u=>{!u||(s=new ve(d=>{const c=d[0];t("resize",c)}),s.observe(u))},f=()=>{s&&(s.disconnect(),s=null)};return $(a,u=>{s&&f(),u&&r(u)}),me(()=>{s&&f()}),()=>{var u;return o.value=(u=l.default)==null?void 0:u.call(l),o.value}}});function vt(e,t){const l=m(e[t]);return G(()=>{const o=e[t];l.value!==o&&(l.value=o)}),l}const de=Symbol("ArcoTrigger"),mt=({elementRef:e,onResize:t})=>{let l;return{createResizeObserver:()=>{!e.value||(l=new ve(s=>{const r=s[0];je(t)&&t(r)}),l.observe(e.value))},destroyResizeObserver:()=>{l&&(l.disconnect(),l=null)}}};var bt=U({name:"ClientOnly",setup(e,{slots:t}){const l=m(!1);return j(()=>l.value=!0),()=>{var o;return l.value?(o=t.default)==null?void 0:o.call(t):null}}});const yt=({popupContainer:e,visible:t,defaultContainer:l="body",documentContainer:o})=>{const a=m(e.value),s=m(),r=()=>{const f=le(e.value),u=f?e.value:l,d=f!=null?f:o?document.documentElement:le(l);u!==a.value&&(a.value=u),d!==s.value&&(s.value=d)};return j(()=>r()),$(t,f=>{a.value!==e.value&&f&&r()}),{teleportContainer:a,containerRef:s}};var wt=Object.defineProperty,gt=Object.defineProperties,Ot=Object.getOwnPropertyDescriptors,ce=Object.getOwnPropertySymbols,Ct=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable,he=(e,t,l)=>t in e?wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,Pt=(e,t)=>{for(var l in t||(t={}))Ct.call(t,l)&&he(e,l,t[l]);if(ce)for(var l of ce(t))_t.call(t,l)&&he(e,l,t[l]);return e},pt=(e,t)=>gt(e,Ot(t));const Tt=["onClick","onMouseenter","onMouseleave","onFocusin","onFocusout","onContextmenu"];var H=U({name:"Trigger",inheritAttrs:!1,props:{popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},trigger:{type:[String,Array],default:"hover"},position:{type:String,default:"bottom"},disabled:{type:Boolean,default:!1},popupOffset:{type:Number,default:0},popupTranslate:{type:[Array,Object]},showArrow:{type:Boolean,default:!1},alignPoint:{type:Boolean,default:!1},popupHoverStay:{type:Boolean,default:!0},blurToClose:{type:Boolean,default:!0},clickToClose:{type:Boolean,default:!0},clickOutsideToClose:{type:Boolean,default:!0},unmountOnClose:{type:Boolean,default:!0},contentClass:{type:[String,Array,Object]},contentStyle:{type:Object},arrowClass:{type:[String,Array,Object]},arrowStyle:{type:Object},popupStyle:{type:Object},animationName:{type:String,default:"fade-in"},duration:{type:[Number,Object]},mouseEnterDelay:{type:Number,default:100},mouseLeaveDelay:{type:Number,default:100},focusDelay:{type:Number,default:0},autoFitPopupWidth:{type:Boolean,default:!1},autoFitPopupMinWidth:{type:Boolean,default:!1},autoFixPosition:{type:Boolean,default:!0},popupContainer:{type:[String,Object]},updateAtScroll:{type:Boolean,default:!1},autoFitTransformOrigin:{type:Boolean,default:!1},hideEmpty:{type:Boolean,default:!1},openedClass:{type:[String,Array,Object]},autoFitPosition:{type:Boolean,default:!0},renderToBody:{type:Boolean,default:!0},preventFocus:{type:Boolean,default:!1}},emits:{"update:popupVisible":e=>!0,popupVisibleChange:e=>!0,show:()=>!0,hide:()=>!0,resize:()=>!0},setup(e,{emit:t,slots:l,attrs:o}){const{popupContainer:a}=qe(e),s=Ve("trigger"),r=B(()=>We(o,Tt)),f=ne(De,void 0),u=B(()=>[].concat(e.trigger)),d=new Set,c=ne(de,void 0),{children:v,firstElement:S}=ye(),_=m(),q=m(e.defaultPopupVisible),x=m(e.position),K=m({}),X=m({}),Y=m({}),we=m(),g=m({top:0,left:0}),h=B(()=>{var n;return(n=e.popupVisible)!=null?n:q.value}),{teleportContainer:ge,containerRef:V}=yt({popupContainer:a,visible:h,documentContainer:!0}),{zIndex:Oe}=ke("popup",{visible:h});let E=0,C=!1;const Ce=()=>{E&&(window.clearTimeout(E),E=0)},W=n=>{if(e.alignPoint){const{pageX:i,pageY:b}=n;g.value={top:b,left:i}}},P=()=>{if(!S.value||!_.value||!V.value)return;const n=V.value.getBoundingClientRect(),i=e.alignPoint?{top:g.value.top,bottom:g.value.top,left:g.value.left,right:g.value.left,scrollTop:g.value.top,scrollBottom:g.value.top,scrollLeft:g.value.left,scrollRight:g.value.left,width:0,height:0}:se(S.value,n),b=se(_.value,n),{style:p,position:T}=dt(e.position,n,i,b,{offset:e.popupOffset,translate:e.popupTranslate,customStyle:e.popupStyle,autoFitPosition:e.autoFitPosition});e.autoFitTransformOrigin&&(X.value={transformOrigin:ft(T)}),e.autoFitPopupMinWidth?p.minWidth=`${i.width}px`:e.autoFitPopupWidth&&(p.width=`${i.width}px`),x.value!==T&&(x.value=T),K.value=p,e.showArrow&&(Y.value=ct(T,i,b,{customStyle:e.arrowStyle}))},O=(n,i)=>{if(n===h.value&&E===0)return;const b=()=>{q.value=n,t("update:popupVisible",n),t("popupVisibleChange",n),n&&tt(()=>{P()})};i?(Ce(),n!==h.value&&(E=window.setTimeout(b,i))):b()},_e=n=>{var i;(i=o.onClick)==null||i.call(o,n),!(e.disabled||h.value&&!e.clickToClose)&&(u.value.includes("click")?(W(n),O(!h.value)):u.value.includes("contextMenu")&&h.value&&O(!1))},Q=n=>{var i;(i=o.onMouseenter)==null||i.call(o,n),!(e.disabled||!u.value.includes("hover"))&&(W(n),O(!0,e.mouseEnterDelay))},J=n=>{c==null||c.onMouseenter(n),Q(n)},Z=n=>{var i;(i=o.onMouseleave)==null||i.call(o,n),!(e.disabled||!u.value.includes("hover"))&&O(!1,e.mouseLeaveDelay)},R=n=>{c==null||c.onMouseleave(n),Z(n)},Pe=n=>{var i;(i=o.onFocusin)==null||i.call(o,n),!(e.disabled||!u.value.includes("focus"))&&O(!0,e.focusDelay)},pe=n=>{var i;(i=o.onFocusout)==null||i.call(o,n),!(e.disabled||!u.value.includes("focus"))&&(!e.blurToClose||O(!1))},Te=n=>{var i;(i=o.onContextmenu)==null||i.call(o,n),!(e.disabled||!u.value.includes("contextMenu")||h.value&&!e.clickToClose)&&(W(n),O(!h.value),n.preventDefault())};Ke(de,Xe({onMouseenter:J,onMouseleave:R,addChildRef:n=>{d.add(n),c==null||c.addChildRef(n)},removeChildRef:n=>{d.delete(n),c==null||c.removeChildRef(n)}}));const D=()=>{He(document.documentElement,"mousedown",k),C=!1},ee=vt(l,"content"),Se=B(()=>{var n;return e.hideEmpty&&Ne((n=ee.value)==null?void 0:n.call(ee))}),k=n=>{var i,b,p;if(!(((i=S.value)==null?void 0:i.contains(n.target))||((b=_.value)==null?void 0:b.contains(n.target)))){for(const T of d)if((p=T.value)!=null&&p.contains(n.target))return;D(),O(!1)}},z=ot(()=>{h.value&&P()}),N=()=>{h.value&&P()},Ee=()=>{N(),t("resize")},Be=n=>{e.preventFocus&&n.preventDefault()};c==null||c.addChildRef(_);const Me=B(()=>h.value?e.openedClass:void 0);let y;$(h,n=>{if(e.clickOutsideToClose&&(!n&&C?D():n&&!C&&(oe(document.documentElement,"mousedown",k),C=!0)),e.updateAtScroll||(f==null?void 0:f.updateAtScroll)){if(n){y=ue(S.value);for(const i of y)i.addEventListener("scroll",z)}else if(y){for(const i of y)i.removeEventListener("scroll",z);y=void 0}}n&&(I.value=!0)}),$(()=>[e.autoFitPopupWidth,e.autoFitPopupMinWidth],()=>{h.value&&P()});const{createResizeObserver:Fe,destroyResizeObserver:xe}=mt({elementRef:V,onResize:N});j(()=>{if(Fe(),h.value&&(P(),e.clickOutsideToClose&&!C&&(oe(document.documentElement,"mousedown",k),C=!0),e.updateAtScroll||(f==null?void 0:f.updateAtScroll))){y=ue(S.value);for(const n of y)n.addEventListener("scroll",z)}}),G(()=>{h.value&&P()}),me(()=>{if(c==null||c.removeChildRef(_),xe(),C&&D(),y){for(const n of y)n.removeEventListener("scroll",z);y=void 0}});const I=m(h.value),L=m(!1),te=()=>{L.value=!0},ze=()=>{L.value=!1,h.value&&t("show")},Le=()=>{L.value=!1,h.value||(I.value=!1,t("hide"))};return()=>{var n,i;return v.value=(i=(n=l.default)==null?void 0:n.call(l))!=null?i:[],Ie(v.value,{class:Me.value,onClick:_e,onMouseenter:Q,onMouseleave:Z,onFocusin:Pe,onFocusout:pe,onContextmenu:Te}),w(et,null,[e.autoFixPosition?w(fe,{onResize:Ee},{default:()=>[v.value]}):v.value,w(bt,null,{default:()=>[w(Ye,{to:ge.value,disabled:!e.renderToBody},{default:()=>[(!e.unmountOnClose||h.value||I.value)&&!Se.value&&w(fe,{onResize:N},{default:()=>[w("div",Qe({ref:_,class:[`${s}-popup`,`${s}-position-${x.value}`],style:pt(Pt({},K.value),{zIndex:Oe.value,pointerEvents:L.value?"none":"auto"}),"trigger-placement":x.value,onMouseenter:J,onMouseleave:R,onMousedown:Be},r.value),[w(Je,{name:e.animationName,duration:e.duration,appear:!0,onBeforeEnter:te,onAfterEnter:ze,onBeforeLeave:te,onAfterLeave:Le},{default:()=>{var b;return[Ze(w("div",{class:`${s}-popup-wrapper`,style:X.value},[w("div",{class:[`${s}-content`,e.contentClass],style:e.contentStyle},[(b=l.content)==null?void 0:b.call(l)]),e.showArrow&&w("div",{ref:we,class:[`${s}-arrow`,e.arrowClass],style:Y.value},null)]),[[Re,h.value]])]}})])]})]})]})])}}});const Ft=Object.assign(H,{install:(e,t)=>{Ge(e,t);const l=Ue(t);e.component(l+H.name,H)}});export{bt as C,fe as R,Ft as T,yt as a,ae as c,lt as r,ot as t,vt as u};
